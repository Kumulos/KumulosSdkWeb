!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.kumulos=e():t.kumulos=e()}(window,function(){return r={},o.m=n=[function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,s,u,a){return new(u=u||Promise)(function(n,e){function r(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,o)}i((a=a.apply(t,s||[])).next())})},c=this&&this.__generator||function(n,r){var o,i,s,t,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};e.__esModule=!0;var s,r,l=n(1),u=n(2),p="1.2.0",f=10,h="https://events.kumulos.com";e.PUSH_BASE_URL="https://push.kumulos.com",(r=s=e.EventType||(e.EventType={})).MESSAGE_DELIVERED="k.message.delivered",r.MESSAGE_OPENED="k.message.opened",r.PUSH_REGISTERED="k.push.deviceRegistered",r.INSTALL_TRACKED="k.stats.installTracked",r.USER_ASSOCIATED="k.stats.userAssociated",r.USER_ASSOCIATION_CLEARED="k.stats.userAssociationCleared",r.PAGE_VIEWED="k.pageViewed";var o=(i.prototype.subscribe=function(t,e){this.subscribers[t]||(this.subscribers[t]=[]),-1<this.subscribers[t].indexOf(e)||this.subscribers[t].push(e)},i.prototype.broadcast=function(t,e){if(this.subscribers[t])for(var n=0;n<this.subscribers[t].length;++n)this.subscribers[t][n]({type:t,data:e})},i);function i(t){var e,n,r;this.apiKey=t.apiKey,this.secretKey=t.secretKey,this.vapidPublicKey=t.vapidPublicKey,this.authHeader="Basic "+btoa(this.apiKey+":"+this.secretKey),this.serviceWorkerPath=null!=(e=t.serviceWorkerPath)?e:"/worker.js",this.pushPrompts=null!=(n=t.pushPrompts)?n:"auto",this.autoResubscribe=null==(r=t.autoResubscribe)||r,this.subscribers={}}e.Context=o,e.assertConfigValid=function(t){if("object"!=typeof t)throw"Config must be an object";for(var e=0,n=["apiKey","secretKey","vapidPublicKey"];e<n.length;e++){var r=n[e];if("string"!=typeof t[r]||0===t[r].length)throw"Required configuration key '"+r+"' must be non-empty string"}if(t.serviceWorkerPath&&"string"!=typeof t.serviceWorkerPath&&0===t.serviceWorkerPath.length)throw"Optional configuration key 'serviceWorkerPath' must be non-empty string (if supplied)"};var d=void 0;function v(){return d||(d=u.get("installId").then(function(t){return t||u.set("installId",l.uuidv4())}))}function _(){return u.get("userId").then(function(t){return null!=t?t:v()})}function b(i,s,u){return a(this,void 0,void 0,function(){var e,n,r,o;return c(this,function(t){switch(t.label){case 0:return[4,v()];case 1:return e=t.sent(),[4,_()];case 2:return n=t.sent(),r=[{type:s,uuid:l.uuidv4(),timestamp:Date.now(),data:u,userId:n}],o=h+"/v1/app-installs/"+e+"/events",i.broadcast("eventTracked",r),[2,l.authedFetch(i,o,{method:"POST",body:JSON.stringify(r)})]}})})}e.getInstallId=v,e.getUserId=_,e.associateUser=function(n,r,o){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,u.set("userId",r)];case 1:return t.sent(),e={id:r,attributes:o},[2,b(n,s.USER_ASSOCIATED,e).then(function(t){})]}})})},e.clearUserAssociation=function(n){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,_()];case 1:return e=t.sent(),b(n,s.USER_ASSOCIATION_CLEARED,{oldUserIdentifier:e}),[2,u.del("userId")]}})})},e.trackEvent=b,e.trackInstallDetails=function(i){return a(this,void 0,void 0,function(){var e,n,r,o;return c(this,function(t){switch(t.label){case 0:e={app:{bundle:location.host,version:"0.0.0",target:2},sdk:{id:f,version:p},runtime:{id:8,version:navigator.userAgent},os:{id:0,version:"0.0.0"},device:{name:navigator.userAgent,tz:"undefined"!=typeof Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone||null,isSimulator:!1,locale:navigator.language}},n=[p,e.app.bundle,e.device.tz,e.device.locale,e.device.name],r=l.cyrb53(n.join("|")),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.get("detailsHash")];case 2:return t.sent()===r?[2,Promise.resolve()]:[3,4];case 3:return o=t.sent(),[2,Promise.reject(o)];case 4:return[2,b(i,s.INSTALL_TRACKED,e).then(function(){return u.set("detailsHash",r)}).then(function(){})]}})})}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};e.__esModule=!0,e.uuidv4=function(){return"undefined"==typeof crypto?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}):(1e7.toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(Number(t)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(t)/4).toString(16)})},e.isBrowserSupported=function(){return[typeof Promise,typeof fetch,typeof Notification,typeof indexedDB,typeof navigator.serviceWorker,typeof PushManager].reduce(function(t,e){return t&&"undefined"!==e},!0)};var s=Math.imul||function(t,e){var n=(4194303&t)*(e|=0);return 4290772992/*!== 0*/&t&&(n+=(4290772992&t)*e|0),0|n};function r(t,e,n){var r;void 0===n&&(n={method:"GET"});var o=null!=(r=n.headers)?r:{};return n.headers=i({"Content-Type":"application/json",Accept:"application/json",Authorization:t.authHeader},o),fetch(e,n)}e.cyrb53=function(t,e){void 0===e&&(e=0);for(var n=3735928559^e,r=1103547991^e,o=0,i=void 0;o<t.length;o++)i=t.charCodeAt(o),n=s(n^i,2654435761),r=s(r^i,1597334677);return n=s(n^n>>>16,2246822507)^s(r^r>>>13,3266489909),4294967296*(2097151&(r=s(r^r>>>16,2246822507)^s(n^n>>>13,3266489909)))+(n>>>0)},e.escapeRegExp=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},e.authedFetch=r,e.authedFetchJson=function(t,e,n){return r(t,e,n).then(function(t){return t.json()})},e.base64UrlEncode=function(t){var e=new Uint8Array(t);return btoa(e.reduce(function(t,e){return t+String.fromCharCode(e)},"")).replace("+","-").replace("/","_").replace("=","")}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(0),o=n(6),i=new o.Store("kumulos","default");function s(t){return o.get(t,i)}function u(t,e){return o.set(t,e,i).then(function(){return e})}e.get=s,e.set=u,e.del=function(t){return o.del(t,i)},e.persistConfig=function(t){return u("config",t)},e.getContextFromStoredConfig=function(){return s("config").then(function(t){return t?new r.Context(t):void 0})}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,s,u,a){return new(u=u||Promise)(function(n,e){function r(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,o)}i((a=a.apply(t,s||[])).next())})},p=this&&this.__generator||function(n,r){var o,i,s,t,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};e.__esModule=!0;var f=n(0),h=n(1),d=n(2);function o(){return r(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:if("undefined"==typeof Notification)return[2,Promise.reject("Notifications are not supported in this browser, aborting...")];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Notification.requestPermission()];case 2:return[2,t.sent()];case 3:return e=t.sent(),console.error(e),[2,Promise.reject(e)];case 4:return[2]}})})}function s(a,c){var l;return r(this,void 0,void 0,function(){var e,n,r,o,i,s,u;return p(this,function(t){switch(t.label){case 0:return"PushManager"in window?[4,c.pushManager.getSubscription()]:[2,Promise.reject("Push notifications are not supported in this browser")];case 1:return!(e=t.sent())||v(a.vapidPublicKey,e)?[3,3]:[4,null===(l=e)||void 0===l?void 0:l.unsubscribe()];case 2:t.sent(),t.label=3;case 3:return[4,c.pushManager.subscribe({applicationServerKey:a.vapidPublicKey,userVisibleOnly:!0})];case 4:return n=t.sent(),r=n.endpoint,o=h.cyrb53(r),i=n.expirationTime,[4,d.get("pushEndpointHash")];case 5:return s=t.sent(),[4,d.get("pushExpiresAt")];case 6:return u=t.sent(),s===o&&(!u||u>Date.now())?[2]:[4,f.trackEvent(a,f.EventType.PUSH_REGISTERED,{type:3,token:n})];case 7:return t.sent(),[4,d.set("pushEndpointHash",o)];case 8:return t.sent(),[4,d.set("pushExpiresAt",i)];case 9:return t.sent(),[2]}})})}function v(t,e){var n=e.options.applicationServerKey;return!!n&&h.base64UrlEncode(n)===t}e.registerServiceWorker=function(t){return"serviceWorker"in navigator?navigator.serviceWorker.register(t).then(function(){return navigator.serviceWorker.ready}):Promise.reject("ServiceWorker is not supported in this browser, aborting...")},e.requestNotificationPermission=o,e.pushRegister=s,e.requestPermissionAndRegisterForPush=function(n){return r(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,o()];case 1:switch(t.sent()){case"default":return[2,"unsubscribed"];case"denied":return[2,"blocked"]}return[4,navigator.serviceWorker.getRegistration()];case 2:if(!(e=t.sent()))return[2,Promise.reject()];t.label=3;case 3:return t.trys.push([3,5,,6]),[4,s(n,e)];case 4:return t.sent(),[2,"subscribed"];case 5:return t.sent(),[2,"unsubscribed"];case 6:return[2]}})})},e.getCurrentSubscriptionState=function(o){var i;return r(this,void 0,void 0,function(){var e,n,r;return p(this,function(t){switch(t.label){case 0:return"denied"===(e=Notification.permission)?[2,"blocked"]:[4,navigator.serviceWorker.getRegistration()];case 1:return n=t.sent(),[4,null===(i=n)||void 0===i?void 0:i.pushManager.getSubscription()];case 2:return(r=t.sent())&&"granted"===e&&v(o.vapidPublicKey,r)?[2,"subscribed"]:[2,"unsubscribed"]}})})},e.handleAutoResubscription=function(i){return r(this,void 0,void 0,function(){var e,n,r,o;return p(this,function(t){switch(t.label){case 0:return i.autoResubscribe?"granted"!==Notification.permission?[2]:[4,d.get("pushEndpointHash")]:[2];case 1:return e=t.sent(),[4,d.get("pushExpiresAt")];case 2:if(n=t.sent(),void 0!==e&&(null==n||n>Date.now()))return[2];t.label=3;case 3:return t.trys.push([3,5,,6]),[4,navigator.serviceWorker.getRegistration()];case 4:return(r=t.sent())?[2,s(i,r)]:(console.warn("No worker, aborting auto-resubscription"),[2]);case 5:return o=t.sent(),console.error(o),[3,6];case 6:return[2]}})})}},function(t,e,n){"use strict";n.r(e),n.d(e,"render",function(){return N}),n.d(e,"hydrate",function(){return O}),n.d(e,"createElement",function(){return l}),n.d(e,"h",function(){return l}),n.d(e,"Fragment",function(){return S}),n.d(e,"createRef",function(){return f}),n.d(e,"isValidElement",function(){return r}),n.d(e,"Component",function(){return P}),n.d(e,"cloneElement",function(){return D}),n.d(e,"createContext",function(){return j}),n.d(e,"toChildArray",function(){return C}),n.d(e,"_unmount",function(){return T}),n.d(e,"options",function(){return g});var g,r,u,o,i,s,a,k={},x=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function w(t,e){for(var n in e)t[n]=e[n];return t}function m(t){var e=t.parentNode;e&&e.removeChild(t)}function l(t,e,n){var r,o=arguments,i={};for(r in e)"key"!==r&&"ref"!==r&&(i[r]=e[r]);if(3<arguments.length)for(n=[n],r=3;r<arguments.length;r++)n.push(o[r]);if(null!=n&&(i.children=n),"function"==typeof t&&null!=t.defaultProps)for(r in t.defaultProps)void 0===i[r]&&(i[r]=t.defaultProps[r]);return p(t,i,e&&e.key,e&&e.ref)}function p(t,e,n,r){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:null,__c:null,constructor:void 0};return g.vnode&&g.vnode(o),o}function f(){return{}}function S(t){return t.children}function P(t,e){this.props=t,this.context=e}function y(t,e){if(null==e)return t.__?y(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?y(t):null}function h(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return h(t)}}function d(t){(!t.__d&&(t.__d=!0)&&1===u.push(t)||i!==g.debounceRendering)&&((i=g.debounceRendering)||o)(v)}function v(){var t,e,n,r,o,i,s;for(u.sort(function(t,e){return e.__v.__b-t.__v.__b});t=u.pop();)t.__d&&(r=n=void 0,i=(o=(e=t).__v).__e,(s=e.__P)&&(n=[],r=M(s,o,w({},o),e.__n,void 0!==s.ownerSVGElement,null,n,null==i?y(o):i),R(n,o),r!=i&&h(o)))}function E(e,n,t,r,o,i,s,u,a){var c,l,p,f,h,d,v,_=t&&t.__k||x,b=_.length;if(u==k&&(u=null!=i?i[0]:b?y(t,0):null),c=0,n.__k=C(n.__k,function(t){if(null!=t){if(t.__=n,t.__b=n.__b+1,null===(p=_[c])||p&&t.key==p.key&&t.type===p.type)_[c]=void 0;else for(l=0;l<b;l++){if((p=_[l])&&t.key==p.key&&t.type===p.type){_[l]=void 0;break}p=null}if(f=M(e,t,p=p||k,r,o,i,s,u,a),(l=t.ref)&&p.ref!=l&&(v=v||[],p.ref&&v.push(p.ref,null,t),v.push(l,t.__c||f,t)),null!=f){if(null==d&&(d=f),null!=t.__d)f=t.__d,t.__d=null;else if(i==p||f!=u||null==f.parentNode){t:if(null==u||u.parentNode!==e)e.appendChild(f);else{for(h=u,l=0;(h=h.nextSibling)&&l<b;l+=2)if(h==f)break t;e.insertBefore(f,u)}"option"==n.type&&(e.value="")}u=f.nextSibling,"function"==typeof n.type&&(n.__d=f)}}return c++,t}),n.__e=d,null!=i&&"function"!=typeof n.type)for(c=i.length;c--;)null!=i[c]&&m(i[c]);for(c=b;c--;)null!=_[c]&&T(_[c],_[c]);if(v)for(c=0;c<v.length;c++)A(v[c],v[++c],v[++c])}function C(t,e,n){if(null==n&&(n=[]),null==t||"boolean"==typeof t)e&&n.push(e(null));else if(Array.isArray(t))for(var r=0;r<t.length;r++)C(t[r],e,n);else n.push(e?e("string"==typeof t||"number"==typeof t?p(null,t,null,null):null!=t.__e||null!=t.__c?p(t.type,t.props,t.key,null):t):t);return n}function _(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]="number"==typeof n&&!1===c.test(e)?n+"px":null==n?"":n}function I(t,e,n,r,o){var i,s,u,a,c;if(o?"className"===e&&(e="class"):"class"===e&&(e="className"),"key"!==e&&"children"!==e)if("style"===e)if(i=t.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof r&&(i.cssText="",r=null),r)for(s in r)n&&s in n||_(i,s,"");if(n)for(u in n)r&&n[u]===r[u]||_(i,u,n[u])}else"o"===e[0]&&"n"===e[1]?(a=e!==(e=e.replace(/Capture$/,"")),e=((c=e.toLowerCase())in t?c:e).slice(2),n?(r||t.addEventListener(e,b,a),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,b,a)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&!o&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n?t.removeAttribute(e):t.setAttribute(e,n))}function b(t){this.l[t.type](g.event?g.event(t):t)}function M(t,e,n,r,o,i,s,u,a){var c,l,p,f,h,d,v,_,b,m,y=e.type;if(void 0!==e.constructor)return null;(c=g.__b)&&c(e);try{t:if("function"==typeof y){if(_=e.props,b=(c=y.contextType)&&r[c.__c],m=c?b?b.props.value:c.__:r,n.__c?v=(l=e.__c=n.__c).__=l.__E:("prototype"in y&&y.prototype.render?e.__c=l=new y(_,m):(e.__c=l=new P(_,m),l.constructor=y,l.render=U),b&&b.sub(l),l.props=_,l.state||(l.state={}),l.context=m,l.__n=r,p=l.__d=!0,l.__h=[]),null==l.__s&&(l.__s=l.state),null!=y.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=w({},l.__s)),w(l.__s,y.getDerivedStateFromProps(_,l.__s))),f=l.props,h=l.state,p)null==y.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(null==y.getDerivedStateFromProps&&null==l.__e&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(_,m),!l.__e&&null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(_,l.__s,m)){for(l.props=_,l.state=l.__s,l.__d=!1,(l.__v=e).__e=n.__e,e.__k=n.__k,l.__h.length&&s.push(l),c=0;c<e.__k.length;c++)e.__k[c]&&(e.__k[c].__=e);break t}null!=l.componentWillUpdate&&l.componentWillUpdate(_,l.__s,m),null!=l.componentDidUpdate&&l.__h.push(function(){l.componentDidUpdate(f,h,d)})}l.context=m,l.props=_,l.state=l.__s,(c=g.__r)&&c(e),l.__d=!1,l.__v=e,l.__P=t,c=l.render(l.props,l.state,l.context),e.__k=C(null!=c&&c.type==S&&null==c.key?c.props.children:c),null!=l.getChildContext&&(r=w(w({},r),l.getChildContext())),p||null==l.getSnapshotBeforeUpdate||(d=l.getSnapshotBeforeUpdate(f,h)),E(t,e,n,r,o,i,s,u,a),l.base=e.__e,l.__h.length&&s.push(l),v&&(l.__E=l.__=null),l.__e=null}else e.__e=function(t,e,n,r,o,i,s,u){var a,c,l,p,f,h=n.props,d=e.props;if(o="svg"===e.type||o,null==t&&null!=i)for(a=0;a<i.length;a++)if(null!=(c=i[a])&&(null===e.type?3===c.nodeType:c.localName===e.type)){t=c,i[a]=null;break}if(null==t){if(null===e.type)return document.createTextNode(d);t=o?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),i=null}if(null===e.type)null!=i&&(i[i.indexOf(t)]=null),h!==d&&(t.data=d);else if(e!==n){if(null!=i&&(i=x.slice.call(t.childNodes)),l=(h=n.props||k).dangerouslySetInnerHTML,p=d.dangerouslySetInnerHTML,!u){if(h===k)for(h={},f=0;f<t.attributes.length;f++)h[t.attributes[f].name]=t.attributes[f].value;(p||l)&&(p&&l&&p.__html==l.__html||(t.innerHTML=p&&p.__html||""))}(function(t,e,n,r,o){var i;for(i in n)i in e||I(t,i,null,n[i],r);for(i in e)o&&"function"!=typeof e[i]||"value"===i||"checked"===i||n[i]===e[i]||I(t,i,e[i],n[i],r)})(t,d,h,o,u),e.__k=e.props.children,p||E(t,e,n,r,"foreignObject"!==e.type&&o,i,s,k,u),u||("value"in d&&void 0!==d.value&&d.value!==t.value&&(t.value=null==d.value?"":d.value),"checked"in d&&void 0!==d.checked&&d.checked!==t.checked&&(t.checked=d.checked))}return t}(n.__e,e,n,r,o,i,s,a);(c=g.diffed)&&c(e)}catch(t){g.__e(t,e,n)}return e.__e}function R(t,e){g.__c&&g.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){g.__e(t,e.__v)}})}function A(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){g.__e(t,n)}}function T(t,e,n){var r,o,i;if(g.unmount&&g.unmount(t),(r=t.ref)&&A(r,null,e),n||"function"==typeof t.type||(n=null!=(o=t.__e)),t.__e=t.__d=null,null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){g.__e(t,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&T(r[i],e,n);null!=o&&m(o)}function U(t,e,n){return this.constructor(t,n)}function N(t,e,n){var r,o,i;g.__&&g.__(t,e),o=(r=n===s)?null:n&&n.__k||e.__k,t=l(S,null,[t]),i=[],M(e,(r?e:n||e).__k=t,o||k,k,void 0!==e.ownerSVGElement,n&&!r?[n]:o?null:x.slice.call(e.childNodes),i,n||k,r),R(i,t)}function O(t,e){N(t,e,s)}function D(t,e){return e=w(w({},t.props),e),2<arguments.length&&(e.children=x.slice.call(arguments,2)),p(t.type,e,e.key||t.key,e.ref||t.ref)}function j(t){var r={},o={__c:"__cC"+a++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,e=this;return this.getChildContext||(n=[],this.getChildContext=function(){return r[o.__c]=e,r},this.shouldComponentUpdate=function(e){t.value!==e.value&&n.some(function(t){t.context=e.value,d(t)})},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return o.Consumer.contextType=o}g={__e:function(t,e){for(var n;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError)n.setState(n.constructor.getDerivedStateFromError(t));else{if(null==n.componentDidCatch)continue;n.componentDidCatch(t)}return d(n.__E=n)}catch(e){t=e}throw t}},r=function(t){return null!=t&&void 0===t.constructor},P.prototype.setState=function(t,e){var n;n=this.__s!==this.state?this.__s:this.__s=w({},this.state),"function"==typeof t&&(t=t(n,this.props)),t&&w(n,t),null!=t&&this.__v&&(this.__e=!1,e&&this.__h.push(e),d(this))},P.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),d(this))},P.prototype.render=S,u=[],o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,s=k,a=0},function(t,e,n){"use strict";e.__esModule=!0;var r=n(0),o=n(3),i=n(7),s=n(8),u=n(2),a=(c.prototype.getInstallId=function(){return r.getInstallId()},c.prototype.getCurrentUserIdentifier=function(){return r.getUserId()},c.prototype.associateUser=function(t,e){return r.associateUser(this.context,t,e)},c.prototype.clearUserAssociation=function(){return r.clearUserAssociation(this.context)},c.prototype.trackEvent=function(t,e){return r.trackEvent(this.context,t,e).then(function(t){})},c.prototype.pushRegister=function(){var e=this;return o.requestNotificationPermission().then(function(t){return"granted"!==t?Promise.reject("Notification permission not granted"):e.serviceWorkerReg}).then(function(t){return o.pushRegister(e.context,t)})},c.prototype.getChannelSubscriptionManager=function(){return this.channelSubscriptionManager||(this.channelSubscriptionManager=new i.ChannelSubscriptionManager(this.context)),this.channelSubscriptionManager},c);function c(t){r.assertConfigValid(t),this.context=new r.Context(t),u.persistConfig(t),r.trackInstallDetails(this.context),this.serviceWorkerReg=o.registerServiceWorker(this.context.serviceWorkerPath),this.promptManager=new s.PromptManager(this.context)}e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var r,o=(i.prototype._withIDBStore=function(o,i){var s=this;return this._dbp.then(function(r){return new Promise(function(t,e){var n=r.transaction(s.storeName,o);n.oncomplete=function(){return t()},n.onabort=n.onerror=function(){return e(n.error)},i(n.objectStore(s.storeName))})})},i);function i(r,o){void 0===r&&(r="keyval-store"),void 0===o&&(o="keyval"),this.storeName=o,this._dbp=new Promise(function(t,e){var n=indexedDB.open(r,1);n.onerror=function(){return e(n.error)},n.onsuccess=function(){return t(n.result)},n.onupgradeneeded=function(){n.result.createObjectStore(o)}})}function s(){return r=r||new o}e.Store=o,e.get=function(e,t){var n;return void 0===t&&(t=s()),t._withIDBStore("readonly",function(t){n=t.get(e)}).then(function(){return n.result})},e.set=function(e,n,t){return void 0===t&&(t=s()),t._withIDBStore("readwrite",function(t){t.put(n,e)})},e.del=function(e,t){return void 0===t&&(t=s()),t._withIDBStore("readwrite",function(t){t.delete(e)})},e.clear=function(t){return void 0===t&&(t=s()),t._withIDBStore("readwrite",function(t){t.clear()})},e.keys=function(t){void 0===t&&(t=s());var e=[];return t._withIDBStore("readonly",function(t){(t.openKeyCursor||t.openCursor).call(t).onsuccess=function(){this.result&&(e.push(this.result.key),this.result.continue())}}).then(function(){return e})}},function(t,e,n){"use strict";e.__esModule=!0;var u=n(0),a=n(1),r=(o.prototype.makeSubscriptionRequest=function(o,i){var s=this;return u.getInstallId().then(function(t){var e=u.PUSH_BASE_URL+"/v1/app-installs/"+t+"/channels/subscriptions",n={uuids:i},r={method:o,body:JSON.stringify(n)};return a.authedFetch(s.context,e,r)})},o.prototype.subscribe=function(t){return this.makeSubscriptionRequest("POST",t)},o.prototype.unsubscribe=function(t){return this.makeSubscriptionRequest("DELETE",t)},o.prototype.setSubscriptions=function(t){return this.makeSubscriptionRequest("PUT",t)},o.prototype.clearSubscriptions=function(){return this.setSubscriptions([])},o.prototype.listChannels=function(){var n=this;return u.getInstallId().then(function(t){var e=u.PUSH_BASE_URL+"/v1/app-installs/"+t+"/channels";return a.authedFetchJson(n.context,e)})},o.prototype.createChannel=function(o){var i=this;return!o.showInPortal||o.name&&o.name.length?u.getInstallId().then(function(t){var e=u.PUSH_BASE_URL+"/v1/channels",n={uuid:o.uuid,name:o.name,showInPortal:Boolean(o.showInPortal),meta:o.meta,installId:void 0};o.subscribe&&(n.installId=t);var r={method:"POST",body:JSON.stringify(n)};return a.authedFetchJson(i.context,e,r)}):Promise.reject({error:"Name is required for channel creation when showInPortal is true"})},o);function o(t){this.context=t}e.ChannelSubscriptionManager=r},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,s,u,a){return new(u=u||Promise)(function(n,e){function r(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,o)}i((a=a.apply(t,s||[])).next())})},i=this&&this.__generator||function(n,r){var o,i,s,t,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var u=n(3),a=n(4),c=s(n(9)),l=n(14),p=n(15),f=(h.prototype.render=function(){this.subscriptionState&&this.state&&a.render(a.h(c.default,{prompts:this.activePrompts,subscriptionState:this.subscriptionState,promptManagerState:this.state,requestNativePrompt:this.onRequestNativePrompt,onPromptDeclined:this.onPromptDeclined}),document.body)},h.prototype.evaluateTriggers=function(){if("subscribed"!==this.subscriptionState){var t=[];for(var e in this.prompts)for(var n=this.prompts[e],r=0;r<this.eventQueue.length;++r){var o=this.eventQueue[r];p.triggerMatched(n,o)&&t.push(n)}this.activatePrompts(t),this.eventQueue=[]}},h.prototype.deferPromptActivation=function(t){!t.trigger.afterSeconds||t.trigger.afterSeconds<0||(t.trigger.afterSeconds,setTimeout(this.activateDeferredPrompt,1e3*t.trigger.afterSeconds,t))},h.prototype.activatePrompt=function(t){-1<this.activePrompts.indexOf(t)||this.activePrompts.push(t)},h.prototype.activatePrompts=function(t){for(var e=0;e<t.length;++e){var n=t[e];void 0===n.trigger.afterSeconds?this.activatePrompt(n):this.deferPromptActivation(n)}this.render()},h.prototype.setState=function(t){this.state=t,this.onEnter(t)},h.prototype.onEnter=function(r){return o(this,void 0,void 0,function(){var e,n;return i(this,function(t){switch(t.label){case 0:switch(r){case"loading":return[3,1];case"requesting":return[3,5];case"ready":return[3,6]}return[3,8];case 1:return[4,u.handleAutoResubscription(this.context)];case 2:return t.sent(),e=this,[4,u.getCurrentSubscriptionState(this.context)];case 3:return e.subscriptionState=t.sent(),[4,this.loadPrompts()];case 4:return t.sent(),this.setState("ready"),[3,8];case 5:this.render(),t.label=6;case 6:return n=this,[4,u.getCurrentSubscriptionState(this.context)];case 7:return n.subscriptionState=t.sent(),this.evaluateTriggers(),this.render(),[3,8];case 8:return[2]}})})},h.prototype.loadPrompts=function(){return o(this,void 0,void 0,function(){var e,n;return i(this,function(t){switch(t.label){case 0:if("auto"!==this.context.pushPrompts)return this.prompts=r({},this.context.pushPrompts),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,l.loadPromptConfigs(this.context)];case 2:return e.prompts=t.sent(),[3,4];case 3:return n=t.sent(),console.error("Failed to load prompts",n),this.prompts={},[3,4];case 4:return[2,Promise.resolve()]}})})},h);function h(t){var r=this;this.onEventTracked=function(t){var e,n=t.data;(e=r.eventQueue).push.apply(e,n),"ready"===r.state&&r.evaluateTriggers()},this.activateDeferredPrompt=function(t){r.activatePrompt(t),r.render()},this.onRequestNativePrompt=function(){return o(r,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return"requesting"===this.state?[2]:(this.setState("requesting"),e=this,[4,u.requestPermissionAndRegisterForPush(this.context)]);case 1:return e.subscriptionState=t.sent(),this.setState("ready"),[2]}})})},this.onPromptDeclined=function(t){},this.prompts={},this.eventQueue=[],this.activePrompts=[],this.context=t,this.setState("loading"),t.subscribe("eventTracked",this.onEventTracked)}e.PromptManager=f},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0,n(10);var f=n(4);var i,h=(i=f.Component,o(s,i),s.prototype.render=function(){return f.h("div",{class:"kumulos-tooltip kumulos-tooltip-"+this.props.position},this.props.children)},s);function s(){return null!==i&&i.apply(this,arguments)||this}var u,a=(u=f.Component,o(c,u),c.prototype.render=function(){var t,e,n,r,o,i,s;if("unsubscribed"!==this.props.subscriptionState)return null;var u="kumulos-prompt kumulos-prompt-"+this.props.promptManagerState+" kumulos-bell-container kumulos-bell-container-"+this.props.config.position,a=-1<this.props.config.position.indexOf("left")?"right":"left",c=null===(e=null===(t=this.props.config.colors)||void 0===t?void 0:t.bell)||void 0===e?void 0:e.bg,l=null===(r=null===(n=this.props.config.colors)||void 0===n?void 0:n.bell)||void 0===r?void 0:r.fg,p={borderColor:l,backgroundColor:c};return f.h("div",{class:u},f.h("div",{class:"kumulos-bell-inner kumulos-tooltip-parent"},f.h("div",{class:"kumulos-bell",onClick:this.props.requestNativePrompt,style:p},f.h("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},f.h("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z",fill:l}))),f.h(h,{position:a},null!=(s=null===(i=null===(o=this.props.config.labels)||void 0===o?void 0:o.tooltip)||void 0===i?void 0:i.subscribe)?s:"Subscribe for notifications")))},c);function c(){return null!==u&&u.apply(this,arguments)||this}var l,p=(l=f.Component,o(d,l),d.prototype.render=function(){return f.h(f.Fragment,null,this.props.prompts.map(this.renderPrompt,this))},d.prototype.renderPrompt=function(t){switch(t.type){case"bell":return f.h(a,{config:t,subscriptionState:this.props.subscriptionState,promptManagerState:this.props.promptManagerState,requestNativePrompt:this.props.requestNativePrompt,onPromptDeclined:this.props.onPromptDeclined});default:return null}},d);function d(){return null!==l&&l.apply(this,arguments)||this}e.default=p},function(t,e,n){var r=n(11);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1};n(13)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(12)(!1)).push([t.i,".kumulos-prompt{box-sizing:border-box;z-index:1000}.kumulos-prompt *,.kumulos-prompt *:before,.kumulos-prompt *:after{box-sizing:inherit}.kumulos-bell-container{position:fixed}.kumulos-bell-container-bottom-left{bottom:15px;left:15px}.kumulos-bell-container-bottom-right{bottom:15px;right:15px}.kumulos-bell{transition:transform 0.2s cubic-bezier(0.23, 1, 0.32, 1),box-shadow 0.2s cubic-bezier(0.23, 1, 0.32, 1);will-change:transform, box-shadow, width, height;border-radius:100%;border-color:#fff;background:#4c88e0;box-shadow:1px 2px 2px 0 rgba(0,0,0,0.54);width:60px;height:60px;padding:10px;transform:scale(0.9);cursor:pointer;animation:kumulos-anim-fade-in 0.2s ease-in;backface-visibility:hidden}.kumulos-bell:hover{transform:scale(1);box-shadow:1px 2px 3px 1px rgba(0,0,0,0.54)}.kumulos-bell:active{transform:scale(0.8);box-shadow:1px 2px 2px 0 rgba(0,0,0,0.54)}.kumulos-bell svg{fill:#fff;animation:kumulos-anim-shake 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;animation-delay:0.3s}.kumulos-bell:before{content:'';display:block;width:85%;height:85%;border:solid 1px;border-radius:100%;border-color:inherit;position:absolute;top:0;left:0;margin:7.5% 0 0 7.5%}.kumulos-bell-inner{border-radius:100%}.kumulos-tooltip-parent .kumulos-tooltip{display:none}.kumulos-tooltip-parent:hover .kumulos-tooltip{display:block}.kumulos-tooltip{background:#222;position:absolute;top:50%;padding:8px 12px;font:14px helvetica, sans-serif;color:#eee;border-radius:6px;white-space:nowrap;z-index:1100;pointer-events:none;transform:translateY(-50%);will-change:opacity, transform}.kumulos-tooltip:after{content:\"\";width:0;height:0;position:absolute;top:50%;right:100%;border:solid transparent;border-width:8px;margin-top:-8px}.kumulos-tooltip-right{left:calc(100% + 12px);animation:kumulos-reveal-right 0.2s cubic-bezier(0.23, 1, 0.32, 1)}.kumulos-tooltip-right:after{border-right-color:#222;right:100%}.kumulos-tooltip-left{right:calc(100% + 12px);animation:kumulos-reveal-left 0.2s cubic-bezier(0.23, 1, 0.32, 1)}.kumulos-tooltip-left:after{border-left-color:#222;left:100%}@keyframes kumulos-anim-shake{10%,90%{transform:translate3d(-1px, 0, 0)}20%,80%{transform:translate3d(2px, 0, 0)}30%,50%,70%{transform:translate3d(-2px, 0, 0)}40%,60%{transform:translate3d(2px, 0, 0)}}@keyframes kumulos-anim-fade-in{0%{opacity:0}100%{opacity:1}}@keyframes kumulos-reveal-left{0%{opacity:0;transform:translate(10px, -50%)}100%{opacity:1;transform:translate(0px, -50%)}}@keyframes kumulos-reveal-right{0%{opacity:0;transform:translate(-10px, -50%)}100%{opacity:1;transform:translate(0px, -50%)}}\n",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(n){var o=[];return o.toString=function(){return this.map(function(t){var e=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=function(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(n," */")}(r),i=r.sources.map(function(t){return"/*# sourceURL=".concat(r.sourceRoot).concat(t," */")});return[n].concat(i).concat([o]).join("\n")}return[n].join("\n")}(t,n);return t[2]?"@media ".concat(t[2]," {").concat(e,"}"):e}).join("")},o.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n=0;n<t.length;n++){var r=[].concat(t[n]);e&&(r[2]?r[2]="".concat(e," and ").concat(r[2]):r[2]=e),o.push(r)}},o}},function(t,e,o){"use strict";var n,r,l={},i=function(){return"undefined"==typeof n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},s=(r={},function(t){if("undefined"==typeof r[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}r[t]=e}return r[t]});function p(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],u={css:i[1],media:i[2],sourceMap:i[3]};r[s]?r[s].parts.push(u):n.push(r[s]={id:s,parts:[u]})}return n}function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=l[r.id],i=0;if(o){for(o.refs++;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(_(r.parts[i],e))}else{for(var s=[];i<r.parts.length;i++)s.push(_(r.parts[i],e));l[r.id]={id:r.id,refs:1,parts:s}}}}function u(e){var n=document.createElement("style");if("undefined"==typeof e.attributes.nonce){var t=o.nc;t&&(e.attributes.nonce=t)}if(Object.keys(e.attributes).forEach(function(t){n.setAttribute(t,e.attributes[t])}),"function"==typeof e.insert)e.insert(n);else{var r=s(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}return n}var a,c=(a=[],function(t,e){return a[t]=e,a.filter(Boolean).join("\n")});function h(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=c(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}var d=null,v=0;function _(e,t){var n,r,o;if(t.singleton){var i=v++;n=d=d||u(t),r=h.bind(null,n,i,!1),o=h.bind(null,n,i,!0)}else n=u(t),r=function(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o&&t.setAttribute("media",o),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,n,t),o=function(){!function(t){if(null===t.parentNode)return;t.parentNode.removeChild(t)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}t.exports=function(t,a){(a=a||{}).attributes="object"==typeof a.attributes?a.attributes:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=i());var c=p(t,a);return f(c,a),function(t){for(var e=[],n=0;n<c.length;n++){var r=c[n],o=l[r.id];o&&(o.refs--,e.push(o))}t&&f(p(t,a),a);for(var i=0;i<e.length;i++){var s=e[i];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete l[s.id]}}}}},function(t,e,n){"use strict";var g=this&&this.__assign||function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,s,u,a){return new(u=u||Promise)(function(n,e){function r(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,o)}i((a=a.apply(t,s||[])).next())})},k=this&&this.__generator||function(n,r){var o,i,s,t,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};e.__esModule=!0;var x=n(0),w=n(2),S=n(1);e.loadPromptConfigs=function(b){var m,y;return r(this,void 0,void 0,function(){var r,o,i,s,u,a,c,l,p,f,h,d,v,_;return k(this,function(t){switch(t.label){case 0:return r=216e5,o={},[4,w.get("promptsUpdated")];case 1:if(m=t.sent(),i=null!=m?m:0,s=!1,!(Date.now()-i>r))return[3,5];t.label=2;case 2:return t.trys.push([2,4,,5]),[4,(e=b,n=x.PUSH_BASE_URL+"/v1/web/config",S.authedFetchJson(e,n))];case 3:return u=t.sent(),o=u.prompts,s=!0,[3,5];case 4:return a=t.sent(),console.warn(a),[3,5];case 5:return[4,w.get("prompts")];case 6:if(y=t.sent(),l=g({},c=null!=y?y:{}),!s)return[3,9];for(_ in o)l[_]=o[_];for(p=Object.keys(c),f=Object.keys(o),h=p.filter(function(t){return-1===f.indexOf(t)}),d=0,v=h;d<v.length;d++)_=v[d],delete l[_];return[4,w.set("prompts",l)];case 7:return t.sent(),[4,w.set("promptsUpdated",Date.now())];case 8:t.sent(),t.label=9;case 9:return[2,l]}var e,n})})}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(1);function f(t,n){return!!Array.isArray(t)&&("string"==typeof n?t.map(function(t){return new RegExp(r.escapeRegExp(t).replace("\\*",".*"),"g")}).reduce(function(t,e){return t||e.test(String(n))},!1):"number"==typeof n&&-1<t.indexOf(n))}e.triggerMatched=function(t,e){var n,r=t.trigger;if(r.event!==e.type)return!1;if(!(null===(n=r.filters)||void 0===n?void 0:n.length))return!0;if(!e.data)return!1;for(var o=!0,i=0;i<r.filters.length;++i){var s=r.filters[i],u=s[0],a=s[1],c=s[2],l=e.data[u],p=!1;switch(a){case"in":case"IN":p=f(c,l);break;case"=":p=c==l;break;case">":p=c<l;break;case">=":p=c<=l;break;case"<":p=l<c;break;case"<=":p=l<=c;break;default:console.warn("Unknown filter operator: "+a)}o=o&&p}return o}}],o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=5);function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var n,r});
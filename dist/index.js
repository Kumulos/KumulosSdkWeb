!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.kumulos=e():t.kumulos=e()}(window,function(){return r={},o.m=n=[function(t,e,n){"use strict";n.r(e),n.d(e,"render",function(){return U}),n.d(e,"hydrate",function(){return I}),n.d(e,"createElement",function(){return l}),n.d(e,"h",function(){return l}),n.d(e,"Fragment",function(){return S}),n.d(e,"createRef",function(){return f}),n.d(e,"isValidElement",function(){return r}),n.d(e,"Component",function(){return P}),n.d(e,"cloneElement",function(){return j}),n.d(e,"createContext",function(){return D}),n.d(e,"toChildArray",function(){return A}),n.d(e,"_unmount",function(){return M}),n.d(e,"options",function(){return g});var g,r,s,o,i,u,a,k={},w=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function x(t,e){for(var n in e)t[n]=e[n];return t}function y(t){var e=t.parentNode;e&&e.removeChild(t)}function l(t,e,n){var r,o=arguments,i={};for(r in e)"key"!==r&&"ref"!==r&&(i[r]=e[r]);if(3<arguments.length)for(n=[n],r=3;r<arguments.length;r++)n.push(o[r]);if(null!=n&&(i.children=n),"function"==typeof t&&null!=t.defaultProps)for(r in t.defaultProps)void 0===i[r]&&(i[r]=t.defaultProps[r]);return p(t,i,e&&e.key,e&&e.ref)}function p(t,e,n,r){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0};return g.vnode&&g.vnode(o),o}function f(){return{}}function S(t){return t.children}function P(t,e){this.props=t,this.context=e}function C(t,e){if(null==e)return t.__?C(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?C(t):null}function d(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return d(t)}}function h(t){(!t.__d&&(t.__d=!0)&&1===s.push(t)||i!==g.debounceRendering)&&((i=g.debounceRendering)||o)(v)}function v(){var t,e,n,r,o,i,u;for(s.sort(function(t,e){return e.__v.__b-t.__v.__b});t=s.pop();)t.__d&&(r=n=void 0,i=(o=(e=t).__v).__e,(u=e.__P)&&(n=[],r=T(u,o,x({},o),e.__n,void 0!==u.ownerSVGElement,null,n,null==i?C(o):i),b(n,o),r!=i&&d(o)))}function E(n,r,t,o,i,u,s,a,c){var l,p,f,d,h,v,m,_=t&&t.__k||w,b=_.length;if(a==k&&(a=null!=u?u[0]:b?C(t,0):null),l=0,r.__k=A(r.__k,function(t){if(null!=t){if(t.__=r,t.__b=r.__b+1,null===(f=_[l])||f&&t.key==f.key&&t.type===f.type)_[l]=void 0;else for(p=0;p<b;p++){if((f=_[p])&&t.key==f.key&&t.type===f.type){_[p]=void 0;break}f=null}if(d=T(n,t,f=f||k,o,i,u,s,a,c),(p=t.ref)&&f.ref!=p&&(m=m||[],f.ref&&m.push(f.ref,null,t),m.push(p,t.__c||d,t)),null!=d){var e;if(null==v&&(v=d),void 0!==t.__d)e=t.__d,t.__d=void 0;else if(u==f||d!=a||null==d.parentNode){t:if(null==a||a.parentNode!==n)n.appendChild(d),e=null;else{for(h=a,p=0;(h=h.nextSibling)&&p<b;p+=2)if(h==d)break t;n.insertBefore(d,a),e=a}"option"==r.type&&(n.value="")}a=void 0!==e?e:d.nextSibling,"function"==typeof r.type&&(r.__d=a)}}return l++,t}),r.__e=v,null!=u&&"function"!=typeof r.type)for(l=u.length;l--;)null!=u[l]&&y(u[l]);for(l=b;l--;)null!=_[l]&&M(_[l],_[l]);if(m)for(l=0;l<m.length;l++)O(m[l],m[++l],m[++l])}function A(t,e,n){if(null==n&&(n=[]),null==t||"boolean"==typeof t)e&&n.push(e(null));else if(Array.isArray(t))for(var r=0;r<t.length;r++)A(t[r],e,n);else n.push(e?e("string"==typeof t||"number"==typeof t?p(null,t,null,null):null!=t.__e||null!=t.__c?p(t.type,t.props,t.key,null):t):t);return n}function m(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]="number"==typeof n&&!1===c.test(e)?n+"px":null==n?"":n}function R(t,e,n,r,o){var i,u,s,a,c;if(o?"className"===e&&(e="class"):"class"===e&&(e="className"),"key"!==e&&"children"!==e)if("style"===e)if(i=t.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof r&&(i.cssText="",r=null),r)for(u in r)n&&u in n||m(i,u,"");if(n)for(s in n)r&&n[s]===r[s]||m(i,s,n[s])}else"o"===e[0]&&"n"===e[1]?(a=e!==(e=e.replace(/Capture$/,"")),e=((c=e.toLowerCase())in t?c:e).slice(2),n?(r||t.addEventListener(e,_,a),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,_,a)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&!o&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n?t.removeAttribute(e):t.setAttribute(e,n))}function _(t){this.l[t.type](g.event?g.event(t):t)}function T(t,e,n,r,o,i,u,s,a){var c,l,p,f,d,h,v,m,_,b,y=e.type;if(void 0!==e.constructor)return null;(c=g.__b)&&c(e);try{t:if("function"==typeof y){if(m=e.props,_=(c=y.contextType)&&r[c.__c],b=c?_?_.props.value:c.__:r,n.__c?v=(l=e.__c=n.__c).__=l.__E:("prototype"in y&&y.prototype.render?e.__c=l=new y(m,b):(e.__c=l=new P(m,b),l.constructor=y,l.render=N),_&&_.sub(l),l.props=m,l.state||(l.state={}),l.context=b,l.__n=r,p=l.__d=!0,l.__h=[]),null==l.__s&&(l.__s=l.state),null!=y.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=x({},l.__s)),x(l.__s,y.getDerivedStateFromProps(m,l.__s))),f=l.props,d=l.state,p)null==y.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(null==y.getDerivedStateFromProps&&m!==f&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(m,b),!l.__e&&null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(m,l.__s,b)){for(l.props=m,l.state=l.__s,l.__d=!1,(l.__v=e).__e=n.__e,e.__k=n.__k,l.__h.length&&u.push(l),c=0;c<e.__k.length;c++)e.__k[c]&&(e.__k[c].__=e);break t}null!=l.componentWillUpdate&&l.componentWillUpdate(m,l.__s,b),null!=l.componentDidUpdate&&l.__h.push(function(){l.componentDidUpdate(f,d,h)})}l.context=b,l.props=m,l.state=l.__s,(c=g.__r)&&c(e),l.__d=!1,l.__v=e,l.__P=t,c=l.render(l.props,l.state,l.context),e.__k=null!=c&&c.type==S&&null==c.key?c.props.children:c,null!=l.getChildContext&&(r=x(x({},r),l.getChildContext())),p||null==l.getSnapshotBeforeUpdate||(h=l.getSnapshotBeforeUpdate(f,d)),E(t,e,n,r,o,i,u,s,a),l.base=e.__e,l.__h.length&&u.push(l),v&&(l.__E=l.__=null),l.__e=!1}else e.__e=function(t,e,n,r,o,i,u,s){var a,c,l,p,f,d=n.props,h=e.props;if(o="svg"===e.type||o,null==t&&null!=i)for(a=0;a<i.length;a++)if(null!=(c=i[a])&&(null===e.type?3===c.nodeType:c.localName===e.type)){t=c,i[a]=null;break}if(null==t){if(null===e.type)return document.createTextNode(h);t=o?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,h.is&&{is:h.is}),i=null}if(null===e.type)null!=i&&(i[i.indexOf(t)]=null),d!==h&&t.data!=h&&(t.data=h);else if(e!==n){if(null!=i&&(i[i.indexOf(t)]=null,i=w.slice.call(t.childNodes)),l=(d=n.props||k).dangerouslySetInnerHTML,p=h.dangerouslySetInnerHTML,!s){if(d===k)for(d={},f=0;f<t.attributes.length;f++)d[t.attributes[f].name]=t.attributes[f].value;(p||l)&&(p&&l&&p.__html==l.__html||(t.innerHTML=p&&p.__html||""))}(function(t,e,n,r,o){var i;for(i in n)i in e||R(t,i,null,n[i],r);for(i in e)o&&"function"!=typeof e[i]||"value"===i||"checked"===i||n[i]===e[i]||R(t,i,e[i],n[i],r)})(t,h,d,o,s),e.__k=e.props.children,p||E(t,e,n,r,"foreignObject"!==e.type&&o,i,u,k,s),s||("value"in h&&void 0!==h.value&&h.value!==t.value&&(t.value=null==h.value?"":h.value),"checked"in h&&void 0!==h.checked&&h.checked!==t.checked&&(t.checked=h.checked))}return t}(n.__e,e,n,r,o,i,u,a);(c=g.diffed)&&c(e)}catch(t){g.__e(t,e,n)}return e.__e}function b(t,e){g.__c&&g.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){g.__e(t,e.__v)}})}function O(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){g.__e(t,n)}}function M(t,e,n){var r,o,i;if(g.unmount&&g.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||O(r,null,e)),n||"function"==typeof t.type||(n=null!=(o=t.__e)),t.__e=t.__d=void 0,null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){g.__e(t,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&M(r[i],e,n);null!=o&&y(o)}function N(t,e,n){return this.constructor(t,n)}function U(t,e,n){var r,o,i;g.__&&g.__(t,e),o=(r=n===u)?null:n&&n.__k||e.__k,t=l(S,null,[t]),i=[],T(e,(r?e:n||e).__k=t,o||k,k,void 0!==e.ownerSVGElement,n&&!r?[n]:o?null:w.slice.call(e.childNodes),i,n||k,r),b(i,t)}function I(t,e){U(t,e,u)}function j(t,e){return e=x(x({},t.props),e),2<arguments.length&&(e.children=w.slice.call(arguments,2)),p(t.type,e,e.key||t.key,e.ref||t.ref)}function D(t){var r={},o={__c:"__cC"+a++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,e=this;return this.getChildContext||(n=[],this.getChildContext=function(){return r[o.__c]=e,r},this.shouldComponentUpdate=function(e){t.value!==e.value&&n.some(function(t){t.context=e.value,h(t)})},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return o.Consumer.contextType=o}g={__e:function(t,e){for(var n,r;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(t))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(t)),r)return h(n.__E=n)}catch(e){t=e}throw t}},r=function(t){return null!=t&&void 0===t.constructor},P.prototype.setState=function(t,e){var n;n=this.__s!==this.state?this.__s:this.__s=x({},this.state),"function"==typeof t&&(t=t(n,this.props)),t&&x(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),h(this))},P.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),h(this))},P.prototype.render=S,s=[],o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=k,a=0},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function r(){for(var t=navigator.userAgent.toLowerCase(),e=0,n=["edge","firefox","chrome","safari"];e<n.length;e++){var r=n[e];if(-1<t.indexOf(r))return r}return""}e.__esModule=!0,e.uuidv4=function(){return"undefined"==typeof crypto?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}):(1e7.toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(Number(t)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(t)/4).toString(16)})},e.getBrowserName=r,e.isBrowserSupported=function(){var t,e=[typeof Promise,typeof fetch,typeof indexedDB];return"safari"===r()?e.push(typeof(null===(t=window.safari)||void 0===t?void 0:t.pushNotification)):e.push.apply(e,[typeof Notification,typeof navigator.serviceWorker,typeof PushManager]),e.reduce(function(t,e){return t&&"undefined"!==e},!0)};var u=Math.imul||function(t,e){var n=(4194303&t)*(e|=0);return 4290772992/*!== 0*/&t&&(n+=(4290772992&t)*e|0),0|n};function o(t,e,n){var r;void 0===n&&(n={method:"GET"});var o=null!=(r=n.headers)?r:{};return n.headers=i({"Content-Type":"application/json",Accept:"application/json",Authorization:t.authHeader},o),fetch(e,n)}e.cyrb53=function(t,e){void 0===e&&(e=0);for(var n=3735928559^e,r=1103547991^e,o=0,i=void 0;o<t.length;o++)i=t.charCodeAt(o),n=u(n^i,2654435761),r=u(r^i,1597334677);return n=u(n^n>>>16,2246822507)^u(r^r>>>13,3266489909),4294967296*(2097151&(r=u(r^r>>>16,2246822507)^u(n^n>>>13,3266489909)))+(n>>>0)},e.escapeRegExp=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},e.authedFetch=o,e.authedFetchJson=function(t,e,n){return o(t,e,n).then(function(t){return t.json()})},e.base64UrlEncode=function(t){var e=new Uint8Array(t);return btoa(e.reduce(function(t,e){return t+String.fromCharCode(e)},"")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},e.registerServiceWorker=function(t){return"serviceWorker"in navigator?navigator.serviceWorker.register(t).then(function(){return navigator.serviceWorker.ready}):Promise.reject("ServiceWorker is not supported in this browser, aborting...")},e.defer=function(){var n={resolve:null,reject:null,promise:null};return n.promise=new Promise(function(t,e){n.resolve=t,n.reject=e}),n},e.parseQueryString=function(t,e){void 0===t&&(t=location.search),void 0===e&&(e=[]);var n=void 0;return 0<t.length&&(n=t.substring(1).split("&").map(function(t){return t.split("=")}).map(function(t){return t.map(decodeURIComponent)}).filter(function(t){return-1===e.indexOf(t[0])}).reduce(function(t,e){var n;return i(i({},t),((n={})[e[0]]=e[1],n))},{})),n}},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,u,s,a){return new(s=s||Promise)(function(n,e){function r(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((a=a.apply(t,u||[])).next())})},c=this&&this.__generator||function(n,r){var o,i,u,t,s={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(u=2&e[0]?i.return:e[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,e[1])).done)return u;switch(i=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(u=0<(u=s.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){s.label=e[1];break}if(6===e[0]&&s.label<u[1]){s.label=u[1],u=e;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(e);break}u[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};e.__esModule=!0;var u,r,l=n(1),s=n(3),p="1.4.0",f=10,d="https://events.kumulos.com";e.PUSH_BASE_URL="https://push.kumulos.com",(r=u=e.EventType||(e.EventType={})).MESSAGE_DELIVERED="k.message.delivered",r.MESSAGE_OPENED="k.message.opened",r.PUSH_REGISTERED="k.push.deviceRegistered",r.INSTALL_TRACKED="k.stats.installTracked",r.USER_ASSOCIATED="k.stats.userAssociated",r.USER_ASSOCIATION_CLEARED="k.stats.userAssociationCleared",r.PAGE_VIEWED="k.pageViewed";var o=(i.prototype.subscribe=function(t,e){this.subscribers[t]||(this.subscribers[t]=[]),-1<this.subscribers[t].indexOf(e)||this.subscribers[t].push(e)},i.prototype.broadcast=function(t,e){if(this.subscribers[t])for(var n=0;n<this.subscribers[t].length;++n)this.subscribers[t][n]({type:t,data:e})},i);function i(t){var e,n,r;this.apiKey=t.apiKey,this.secretKey=t.secretKey,this.vapidPublicKey=t.vapidPublicKey,this.authHeader="Basic "+btoa(this.apiKey+":"+this.secretKey),this.serviceWorkerPath=null!=(e=t.serviceWorkerPath)?e:"/worker.js",this.pushPrompts=null!=(n=t.pushPrompts)?n:"auto",this.autoResubscribe=null==(r=t.autoResubscribe)||r,this.subscribers={}}e.Context=o,e.assertConfigValid=function(t){if("object"!=typeof t)throw"Config must be an object";for(var e=0,n=["apiKey","secretKey","vapidPublicKey"];e<n.length;e++){var r=n[e];if("string"!=typeof t[r]||0===t[r].length)throw"Required configuration key '"+r+"' must be non-empty string"}if(t.serviceWorkerPath&&"string"!=typeof t.serviceWorkerPath&&0===t.serviceWorkerPath.length)throw"Optional configuration key 'serviceWorkerPath' must be non-empty string (if supplied)"};var h=void 0;function v(){return h||(h=s.get("installId").then(function(t){return t||s.set("installId",l.uuidv4())}))}function m(){return s.get("userId").then(function(t){return null!=t?t:v()})}function _(i,u,s){return a(this,void 0,void 0,function(){var e,n,r,o;return c(this,function(t){switch(t.label){case 0:return[4,v()];case 1:return e=t.sent(),[4,m()];case 2:return n=t.sent(),r=[{type:u,uuid:l.uuidv4(),timestamp:Date.now(),data:s,userId:n}],o=d+"/v1/app-installs/"+e+"/events",i.broadcast("eventTracked",r),[2,l.authedFetch(i,o,{method:"POST",body:JSON.stringify(r)})]}})})}e.getInstallId=v,e.getUserId=m,e.associateUser=function(n,r,o){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,s.set("userId",r)];case 1:return t.sent(),e={id:r,attributes:o},[2,_(n,u.USER_ASSOCIATED,e).then(function(t){})]}})})},e.clearUserAssociation=function(n){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,m()];case 1:return e=t.sent(),_(n,u.USER_ASSOCIATION_CLEARED,{oldUserIdentifier:e}),[2,s.del("userId")]}})})},e.trackEvent=_,e.trackInstallDetails=function(i){return a(this,void 0,void 0,function(){var e,n,r,o;return c(this,function(t){switch(t.label){case 0:e={app:{bundle:location.host,version:"0.0.0",target:2},sdk:{id:f,version:p},runtime:{id:8,version:navigator.userAgent},os:{id:0,version:"0.0.0"},device:{name:navigator.userAgent,tz:"undefined"!=typeof Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone||null,isSimulator:!1,locale:navigator.language}},n=[p,e.app.bundle,e.device.tz,e.device.locale,e.device.name],r=l.cyrb53(n.join("|")),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,s.get("detailsHash")];case 2:return t.sent()===r?[2,Promise.resolve()]:[3,4];case 3:return o=t.sent(),[2,Promise.reject(o)];case 4:return[2,_(i,u.INSTALL_TRACKED,e).then(function(){return s.set("detailsHash",r)}).then(function(){})]}})})}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(2),o=n(9),i=new o.Store("kumulos","default");function u(t){return o.get(t,i)}function s(t,e){return o.set(t,e,i).then(function(){return e})}e.get=u,e.set=s,e.del=function(t){return o.del(t,i)},e.persistConfig=function(t){return s("config",t)},e.getContextFromStoredConfig=function(){return u("config").then(function(t){return t?new r.Context(t):void 0})}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var o,i,u,s,a=n(2),c=n(1),l=r(n(10)),p=r(n(11)),f=n(5);(o=e.TokenType||(e.TokenType={}))[o.W3C=3]="W3C",o[o.SAFARI=4]="SAFARI",(u=i=i||{})[u.PUSH=1]="PUSH",e.default=function(t){if(s)return s;var e=c.getBrowserName();return s="safari"===e?f.loadConfig(t).then(function(t){return new l.default(t)}):Promise.resolve(new p.default)},e.trackOpenFromQuery=function(t){var e;if("safari"===c.getBrowserName()){var n=c.parseQueryString();(null===(e=n)||void 0===e?void 0:e.knid)&&a.trackEvent(t,a.EventType.MESSAGE_OPENED,{type:i.PUSH,id:Number(n.knid)})}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,u,s,a){return new(s=s||Promise)(function(n,e){function r(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((a=a.apply(t,u||[])).next())})},l=this&&this.__generator||function(n,r){var o,i,u,t,s={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(u=2&e[0]?i.return:e[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,e[1])).done)return u;switch(i=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(u=0<(u=s.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){s.label=e[1];break}if(6===e[0]&&s.label<u[1]){s.label=u[1],u=e;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(e);break}u[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};e.__esModule=!0;var p=n(2),f=n(3),d=n(1);e.loadConfig=function(s){var a,c;return r(this,void 0,void 0,function(){var e,n,r,o,i,u;return l(this,function(t){switch(t.label){case 0:return[4,f.get("platformConfig")];case 1:return a=t.sent(),e=null!=a?a:{},n=36e5,[4,f.get("platformConfigUpdated")];case 2:if(c=t.sent(),r=null!=c?c:0,o=!1,!(Date.now()-r>n))return[3,6];t.label=3;case 3:return t.trys.push([3,5,,6]),i=p.PUSH_BASE_URL+"/v1/web/config",[4,d.authedFetchJson(s,i)];case 4:return e=t.sent(),o=!0,[3,6];case 5:return u=t.sent(),console.warn(u),[3,6];case 6:return o?[4,f.set("platformConfig",e)]:[3,9];case 7:return t.sent(),[4,f.set("platformConfigUpdated",Date.now())];case 8:t.sent(),t.label=9;case 9:return[2,e]}})})}},function(t,e,n){"use strict";t.exports=function(n){var o=[];return o.toString=function(){return this.map(function(t){var e=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=function(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(n," */")}(r),i=r.sources.map(function(t){return"/*# sourceURL=".concat(r.sourceRoot).concat(t," */")});return[n].concat(i).concat([o]).join("\n")}return[n].join("\n")}(t,n);return t[2]?"@media ".concat(t[2]," {").concat(e,"}"):e}).join("")},o.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n=0;n<t.length;n++){var r=[].concat(t[n]);e&&(r[2]?r[2]="".concat(e," and ").concat(r[2]):r[2]=e),o.push(r)}},o}},function(t,e,o){"use strict";var n,r,l={},i=function(){return"undefined"==typeof n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},u=(r={},function(t){if("undefined"==typeof r[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}r[t]=e}return r[t]});function p(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],u=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[u]?r[u].parts.push(s):n.push(r[u]={id:u,parts:[s]})}return n}function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=l[r.id],i=0;if(o){for(o.refs++;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(m(r.parts[i],e))}else{for(var u=[];i<r.parts.length;i++)u.push(m(r.parts[i],e));l[r.id]={id:r.id,refs:1,parts:u}}}}function s(e){var n=document.createElement("style");if("undefined"==typeof e.attributes.nonce){var t=o.nc;t&&(e.attributes.nonce=t)}if(Object.keys(e.attributes).forEach(function(t){n.setAttribute(t,e.attributes[t])}),"function"==typeof e.insert)e.insert(n);else{var r=u(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}return n}var a,c=(a=[],function(t,e){return a[t]=e,a.filter(Boolean).join("\n")});function d(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=c(e,o);else{var i=document.createTextNode(o),u=t.childNodes;u[e]&&t.removeChild(u[e]),u.length?t.insertBefore(i,u[e]):t.appendChild(i)}}var h=null,v=0;function m(e,t){var n,r,o;if(t.singleton){var i=v++;n=h=h||s(t),r=d.bind(null,n,i,!1),o=d.bind(null,n,i,!0)}else n=s(t),r=function(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o&&t.setAttribute("media",o),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,n,t),o=function(){!function(t){if(null===t.parentNode)return;t.parentNode.removeChild(t)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}t.exports=function(t,a){(a=a||{}).attributes="object"==typeof a.attributes?a.attributes:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=i());var c=p(t,a);return f(c,a),function(t){for(var e=[],n=0;n<c.length;n++){var r=c[n],o=l[r.id];o&&(o.refs--,e.push(o))}t&&f(p(t,a),a);for(var i=0;i<e.length;i++){var u=e[i];if(0===u.refs){for(var s=0;s<u.parts.length;s++)u.parts[s]();delete l[u.id]}}}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,u,s,a){return new(s=s||Promise)(function(n,e){function r(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((a=a.apply(t,u||[])).next())})},o=this&&this.__generator||function(n,r){var o,i,u,t,s={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(u=2&e[0]?i.return:e[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,e[1])).done)return u;switch(i=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(u=0<(u=s.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){s.label=e[1];break}if(6===e[0]&&s.label<u[1]){s.label=u[1],u=e;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(e);break}u[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};e.__esModule=!0;var u=n(2),s=i(n(4)),a=n(12),c=n(13),l=n(3),p=n(1),f=(d.prototype.getInstallId=function(){return u.getInstallId()},d.prototype.getCurrentUserIdentifier=function(){return u.getUserId()},d.prototype.associateUser=function(t,e){return u.associateUser(this.context,t,e)},d.prototype.clearUserAssociation=function(){return u.clearUserAssociation(this.context)},d.prototype.trackEvent=function(t,e){return u.trackEvent(this.context,t,e).then(function(t){})},d.prototype.pushRegister=function(){return r(this,void 0,void 0,function(){var e,n=this;return o(this,function(t){switch(t.label){case 0:return[4,s.default(this.context)];case 1:return[2,(e=t.sent()).requestNotificationPermission(this.context).then(function(t){if("granted"!==t)return Promise.reject("Notification permission not granted")}).then(function(){return e.pushRegister(n.context)})]}})})},d.prototype.getChannelSubscriptionManager=function(){return this.channelSubscriptionManager||(this.channelSubscriptionManager=new a.ChannelSubscriptionManager(this.context)),this.channelSubscriptionManager},d);function d(t){u.assertConfigValid(t),this.context=new u.Context(t),l.persistConfig(t),u.trackInstallDetails(this.context),s.trackOpenFromQuery(this.context),this.serviceWorkerReg=p.registerServiceWorker(this.context.serviceWorkerPath),this.promptManager=new c.PromptManager(this,this.context)}e.default=f},function(t,e,n){"use strict";e.__esModule=!0;var r,o=(i.prototype._withIDBStore=function(o,i){var u=this;return this._dbp.then(function(r){return new Promise(function(t,e){var n=r.transaction(u.storeName,o);n.oncomplete=function(){return t()},n.onabort=n.onerror=function(){return e(n.error)},i(n.objectStore(u.storeName))})})},i);function i(r,o){void 0===r&&(r="keyval-store"),void 0===o&&(o="keyval"),this.storeName=o,this._dbp=new Promise(function(t,e){var n=indexedDB.open(r,1);n.onerror=function(){return e(n.error)},n.onsuccess=function(){return t(n.result)},n.onupgradeneeded=function(){n.result.createObjectStore(o)}})}function u(){return r=r||new o}e.Store=o,e.get=function(e,t){var n;return void 0===t&&(t=u()),t._withIDBStore("readonly",function(t){n=t.get(e)}).then(function(){return n.result})},e.set=function(e,n,t){return void 0===t&&(t=u()),t._withIDBStore("readwrite",function(t){t.put(n,e)})},e.del=function(e,t){return void 0===t&&(t=u()),t._withIDBStore("readwrite",function(t){t.delete(e)})},e.clear=function(t){return void 0===t&&(t=u()),t._withIDBStore("readwrite",function(t){t.clear()})},e.keys=function(t){void 0===t&&(t=u());var e=[];return t._withIDBStore("readonly",function(t){(t.openKeyCursor||t.openCursor).call(t).onsuccess=function(){this.result&&(e.push(this.result.key),this.result.continue())}}).then(function(){return e})}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,u,s,a){return new(s=s||Promise)(function(n,e){function r(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((a=a.apply(t,u||[])).next())})},c=this&&this.__generator||function(n,r){var o,i,u,t,s={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(u=2&e[0]?i.return:e[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,e[1])).done)return u;switch(i=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(u=0<(u=s.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){s.label=e[1];break}if(6===e[0]&&s.label<u[1]){s.label=u[1],u=e;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(e);break}u[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};e.__esModule=!0;var s=n(2),a=n(4),o=n(1),l=n(3),p=n(5);function f(t,e){return o.cyrb53(t.apiKey+":"+e)}var i=(u.prototype.requestNotificationPermission=function(t){var e,n=s.PUSH_BASE_URL+"/safari/"+t.apiKey,r=o.defer();return null===(e=window.safari)||void 0===e||e.pushNotification.requestPermission(n,this.cfg.safariPushId,{},function(t){r.resolve(t.permission)}),r.promise},u.prototype.pushRegister=function(i){var u;return r(this,void 0,void 0,function(){var e,n,r,o;return c(this,function(t){switch(t.label){case 0:return[4,p.loadConfig(i)];case 1:return e=t.sent(),(n=null===(u=window.safari)||void 0===u?void 0:u.pushNotification.permission(e.safariPushId))&&n.deviceToken?[4,l.get("pushTokenHash")]:[2];case 2:return r=t.sent(),o=f(i,n.deviceToken),r===o?[2]:[4,s.trackEvent(i,s.EventType.PUSH_REGISTERED,{type:a.TokenType.SAFARI,token:n.deviceToken,bundleId:e.safariPushId})];case 3:return t.sent(),[4,l.set("pushTokenHash",o)];case 4:return t.sent(),[2]}})})},u.prototype.requestPermissionAndRegisterForPush=function(e){return r(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.requestNotificationPermission(e)];case 1:switch(t.sent()){case"default":return[2,"unsubscribed"];case"denied":return[2,"blocked"]}t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.pushRegister(e)];case 3:return t.sent(),[2,"subscribed"];case 4:return t.sent(),[2,"unsubscribed"];case 5:return[2]}})})},u.prototype.getCurrentSubscriptionState=function(i){var u,s,a;return r(this,void 0,void 0,function(){var e,n,r,o;return c(this,function(t){switch(t.label){case 0:return[4,p.loadConfig(i)];case 1:return e=t.sent(),(n=null===(u=window.safari)||void 0===u?void 0:u.pushNotification.permission(e.safariPushId))&&"denied"!==(null===(s=n)||void 0===s?void 0:s.permission)?[4,l.get("pushTokenHash")]:[2,"blocked"];case 2:return r=t.sent(),o=f(i,null!=(a=n.deviceToken)?a:""),r===o&&"granted"===n.permission?[2,"subscribed"]:[2,"unsubscribed"]}})})},u.prototype.handleAutoResubscription=function(i){var u;return r(this,void 0,void 0,function(){var e,n,r,o;return c(this,function(t){switch(t.label){case 0:return i.autoResubscribe&&this.cfg.safariPushId?[4,p.loadConfig(i)]:[2];case 1:return e=t.sent(),(n=null===(u=window.safari)||void 0===u?void 0:u.pushNotification.permission(e.safariPushId))&&"granted"===n.permission&&n.deviceToken?[4,l.get("pushTokenHash")]:[2];case 2:return r=t.sent(),o=f(i,n.deviceToken),r===o?[2]:[2,this.pushRegister(i)]}})})},u);function u(t){this.cfg=t}e.default=i},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,u,s,a){return new(s=s||Promise)(function(n,e){function r(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((a=a.apply(t,u||[])).next())})},l=this&&this.__generator||function(n,r){var o,i,u,t,s={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(u=2&e[0]?i.return:e[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,e[1])).done)return u;switch(i=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(u=0<(u=s.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){s.label=e[1];break}if(6===e[0]&&s.label<u[1]){s.label=u[1],u=e;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(e);break}u[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};e.__esModule=!0;var p=n(2),f=n(4),o=n(1),d=n(3);function h(t,e){var n=e.options.applicationServerKey;return!!n&&o.base64UrlEncode(n)===t}function v(){return r(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,navigator.serviceWorker.getRegistration()];case 1:return t.sent()?[2,navigator.serviceWorker.ready]:[2,Promise.reject("No service worker registration")]}})})}function m(t,e){return o.cyrb53(t.apiKey+":"+e.endpoint)}var i=(u.prototype.requestNotificationPermission=function(t){return r(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:if("undefined"==typeof Notification)return[2,Promise.reject("Notifications are not supported in this browser, aborting...")];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Notification.requestPermission()];case 2:return[2,t.sent()];case 3:return e=t.sent(),console.error(e),[2,Promise.reject(e)];case 4:return[2]}})})},u.prototype.pushRegister=function(a){var c;return r(this,void 0,void 0,function(){var e,n,r,o,i,u,s;return l(this,function(t){switch(t.label){case 0:return"PushManager"in window?[4,v()]:[2,Promise.reject("Push notifications are not supported in this browser")];case 1:return[4,(e=t.sent()).pushManager.getSubscription()];case 2:return!(n=t.sent())||h(a.vapidPublicKey,n)?[3,4]:[4,null===(c=n)||void 0===c?void 0:c.unsubscribe()];case 3:t.sent(),t.label=4;case 4:return[4,e.pushManager.subscribe({applicationServerKey:a.vapidPublicKey,userVisibleOnly:!0})];case 5:return r=t.sent(),o=m(a,r),i=r.expirationTime,[4,d.get("pushEndpointHash")];case 6:return u=t.sent(),[4,d.get("pushExpiresAt")];case 7:return s=t.sent(),u===o&&(!s||s>Date.now())?[2]:[4,p.trackEvent(a,p.EventType.PUSH_REGISTERED,{type:f.TokenType.W3C,token:r})];case 8:return t.sent(),[4,d.set("pushEndpointHash",o)];case 9:return t.sent(),[4,d.set("pushExpiresAt",i)];case 10:return t.sent(),[2]}})})},u.prototype.requestPermissionAndRegisterForPush=function(e){return r(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,this.requestNotificationPermission(e)];case 1:switch(t.sent()){case"default":return[2,"unsubscribed"];case"denied":return[2,"blocked"]}t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.pushRegister(e)];case 3:return t.sent(),[2,"subscribed"];case 4:return t.sent(),[2,"unsubscribed"];case 5:return[2]}})})},u.prototype.getCurrentSubscriptionState=function(o){var i;return r(this,void 0,void 0,function(){var e,n,r;return l(this,function(t){switch(t.label){case 0:return"denied"===(e=Notification.permission)?[2,"blocked"]:[4,v()];case 1:return n=t.sent(),[4,null===(i=n)||void 0===i?void 0:i.pushManager.getSubscription()];case 2:return(r=t.sent())&&"granted"===e&&h(o.vapidPublicKey,r)?[2,"subscribed"]:[2,"unsubscribed"]}})})},u.prototype.handleAutoResubscription=function(i){return r(this,void 0,void 0,function(){var e,n,r,o;return l(this,function(t){switch(t.label){case 0:return i.autoResubscribe?"granted"!==Notification.permission?[2]:[4,d.get("pushEndpointHash")]:[2];case 1:return e=t.sent(),[4,d.get("pushExpiresAt")];case 2:return n=t.sent(),[4,v()];case 3:return[4,t.sent().pushManager.getSubscription()];case 4:if(r=t.sent(),o=void 0,r&&(o=m(i,r)),void 0!==e&&e===o&&r&&h(i.vapidPublicKey,r)&&(null==n||n>Date.now()))return[2];try{return[2,this.pushRegister(i)]}catch(t){console.error(t)}return[2]}})})},u);function u(){}e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var s=n(2),a=n(1),r=(o.prototype.makeSubscriptionRequest=function(o,i){var u=this;return s.getInstallId().then(function(t){var e=s.PUSH_BASE_URL+"/v1/app-installs/"+t+"/channels/subscriptions",n={uuids:i},r={method:o,body:JSON.stringify(n)};return a.authedFetch(u.context,e,r)})},o.prototype.subscribe=function(t){return this.makeSubscriptionRequest("POST",t)},o.prototype.unsubscribe=function(t){return this.makeSubscriptionRequest("DELETE",t)},o.prototype.setSubscriptions=function(t){return this.makeSubscriptionRequest("PUT",t)},o.prototype.clearSubscriptions=function(){return this.setSubscriptions([])},o.prototype.listChannels=function(){var n=this;return s.getInstallId().then(function(t){var e=s.PUSH_BASE_URL+"/v1/app-installs/"+t+"/channels";return a.authedFetchJson(n.context,e)})},o.prototype.createChannel=function(o){var i=this;return!o.showInPortal||o.name&&o.name.length?s.getInstallId().then(function(t){var e=s.PUSH_BASE_URL+"/v1/channels",n={uuid:o.uuid,name:o.name,showInPortal:Boolean(o.showInPortal),meta:o.meta,installId:void 0};o.subscribe&&(n.installId=t);var r={method:"POST",body:JSON.stringify(n)};return a.authedFetchJson(i.context,e,r)}):Promise.reject({error:"Name is required for channel creation when showInPortal is true"})},o);function o(t){this.context=t}e.ChannelSubscriptionManager=r},function(t,e,n){"use strict";var l=this&&this.__assign||function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},u=this&&this.__awaiter||function(t,u,s,a){return new(s=s||Promise)(function(n,e){function r(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((a=a.apply(t,u||[])).next())})},p=this&&this.__generator||function(n,r){var o,i,u,t,s={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(u=2&e[0]?i.return:e[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,e[1])).done)return u;switch(i=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(u=0<(u=s.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){s.label=e[1];break}if(6===e[0]&&s.label<u[1]){s.label=u[1],u=e;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(e);break}u[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var s=r(n(4)),o=n(0),i=r(n(14)),f=n(19),a=n(20),c=(d.prototype.handlePromptActions=function(o){return u(this,void 0,void 0,function(){var e,n,r=this;return p(this,function(t){switch(t.label){case 0:return o.actions?(o.actions,(e=o.actions.map(function(t){return t.channelUuid}).filter(function(e){return r.channels.find(function(t){return t.uuid===e&&!1===t.subscribed})})).length?[4,this.kumulosClient.getChannelSubscriptionManager().subscribe(e)]:[2]):[2];case 1:return t.sent(),[4,(n=this).kumulosClient.getChannelSubscriptionManager().listChannels()];case 2:return n.channels=t.sent(),[2]}})})},d.prototype.render=function(){var e=this;this.subscriptionState&&this.state&&o.render(o.h(i.default,{ref:function(t){return e.ui=t},prompts:this.activePrompts,subscriptionState:this.subscriptionState,promptManagerState:this.state,onPromptAccepted:this.onPromptAccepted,onPromptDeclined:this.onPromptDeclined,currentlyRequestingPrompt:this.currentlyRequestingPrompt}),this.uiRoot)},d.prototype.evaluateTriggers=function(){var t=[];for(var e in this.prompts)for(var n=this.prompts[e],r=0;r<this.eventQueue.length;++r){var o=this.eventQueue[r];a.triggerMatched(n,o)&&this.promptActionNeedsTaken(n)&&t.push(n)}this.activatePrompts(t),this.eventQueue=[]},d.prototype.promptActionNeedsTaken=function(t){var e,n;if("unsubscribed"===this.subscriptionState)return!0;var r=null!=(n=null===(e=t.actions)||void 0===e?void 0:e.map(function(t){return t.channelUuid}))?n:[];return 0<this.channels.filter(function(t){return-1<r.indexOf(t.uuid)&&!t.subscribed}).length},d.prototype.deferPromptActivation=function(t){!t.trigger.afterSeconds||t.trigger.afterSeconds<0||(t.trigger.afterSeconds,setTimeout(this.activateDeferredPrompt,1e3*t.trigger.afterSeconds,t))},d.prototype.activatePrompt=function(t){-1<this.activePrompts.indexOf(t)||this.activePrompts.push(t)},d.prototype.activatePrompts=function(t){for(var e=0;e<t.length;++e){var n=t[e];void 0===n.trigger.afterSeconds?this.activatePrompt(n):this.deferPromptActivation(n)}this.render()},d.prototype.setState=function(t){this.state=t,this.onEnter(t)},d.prototype.onEnter=function(o){var i;return u(this,void 0,void 0,function(){var e,n,r;return p(this,function(t){switch(t.label){case 0:switch(o){case"loading":return[3,1];case"requesting":return[3,6];case"ready":return[3,7]}return[3,9];case 1:return e=this,[4,s.default(this.context)];case 2:return e.pushOpsManager=t.sent(),[4,this.pushOpsManager.handleAutoResubscription(this.context)];case 3:return t.sent(),[4,(n=this).pushOpsManager.getCurrentSubscriptionState(this.context)];case 4:return n.subscriptionState=t.sent(),[4,this.loadPrompts()];case 5:return t.sent(),this.setState("ready"),[3,9];case 6:return this.render(),[3,9];case 7:return this.currentlyRequestingPrompt=void 0,[4,null===(i=(r=this).pushOpsManager)||void 0===i?void 0:i.getCurrentSubscriptionState(this.context)];case 8:return r.subscriptionState=t.sent(),this.evaluateTriggers(),this.render(),[3,9];case 9:return[2]}})})},d.prototype.loadPrompts=function(){var a,c;return u(this,void 0,void 0,function(){var e,n,r,o,i,u,s;return p(this,function(t){switch(t.label){case 0:return"auto"===this.context.pushPrompts?[3,1]:(this.prompts=l({},this.context.pushPrompts),[3,4]);case 1:return t.trys.push([1,3,,4]),e=this,[4,f.loadPromptConfigs(this.context)];case 2:return e.prompts=t.sent(),[3,4];case 3:return n=t.sent(),console.error("Failed to load prompts",n),this.prompts={},[3,4];case 4:for(o in r=[],this.prompts)r.push(o);i=0,t.label=5;case 5:if(!(i<r.length))return[3,11];if(u=r[i],!Boolean(null===(c=null===(a=this.prompts[u].actions)||void 0===a?void 0:a.filter(function(t){return"subscribeToChannel"===t.type}))||void 0===c?void 0:c.length))return[3,10];t.label=6;case 6:return t.trys.push([6,8,,9]),[4,(s=this).kumulosClient.getChannelSubscriptionManager().listChannels()];case 7:return s.channels=t.sent(),[3,9];case 8:return t.sent(),[3,9];case 9:return[3,11];case 10:return i++,[3,5];case 11:return[2,Promise.resolve()]}})})},d);function d(t,e){var i=this;this.onEventTracked=function(t){var e,n=t.data;(e=i.eventQueue).push.apply(e,n),"ready"===i.state&&i.evaluateTriggers()},this.activateDeferredPrompt=function(t){i.activatePrompt(t),i.render()},this.onRequestNativePrompt=function(r){return u(i,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:return"requesting"===this.state?[2]:(this.currentlyRequestingPrompt=r,this.setState("requesting"),[4,null===(n=(e=this).pushOpsManager)||void 0===n?void 0:n.requestPermissionAndRegisterForPush(this.context)]);case 1:return e.subscriptionState=t.sent(),this.setState("ready"),[2]}})})},this.onPromptAccepted=function(o){return u(i,void 0,void 0,function(){var e,n,r;return p(this,function(t){switch(t.label){case 0:return"unsubscribed"!==this.subscriptionState?[3,2]:[4,this.onRequestNativePrompt(o)];case 1:t.sent(),t.label=2;case 2:return[4,this.handlePromptActions(o)];case 3:return t.sent(),"subscribed"===this.subscriptionState&&(null===(n=this.ui)||void 0===n||n.showToast(null===(r=o.labels)||void 0===r?void 0:r.thanksForSubscribing)),e=this.activePrompts.indexOf(o),this.activePrompts.splice(e,1),this.render(),[2]}})})},this.onPromptDeclined=function(t){},this.prompts={},this.eventQueue=[],this.activePrompts=[],this.channels=[],this.uiRoot=document.createElement("div"),this.uiRoot.id="kumulos-ui-root",document.body.appendChild(this.uiRoot),this.kumulosClient=t,this.context=e,this.setState("loading"),e.subscribe("eventTracked",this.onEventTracked)}e.PromptManager=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,s=i.length;u<s;u++,o++)r[o]=i[u];return r};e.__esModule=!0,n(15),n(17);var f=n(0),u=n(21),s=n(1);var a,d=(a=f.Component,o(c,a),c.prototype.render=function(){return f.h("div",{class:"kumulos-tooltip kumulos-tooltip-"+this.props.position},this.props.children)},c);function c(){return null!==a&&a.apply(this,arguments)||this}var l,p=(l=f.Component,o(h,l),h.prototype.render=function(){var t,e,n,r,o,i,u,s="kumulos-prompt kumulos-prompt-"+this.props.promptManagerState+" kumulos-bell-container kumulos-bell-container-"+this.props.config.position,a=-1<this.props.config.position.indexOf("left")?"right":"left",c=null===(e=null===(t=this.props.config.colors)||void 0===t?void 0:t.bell)||void 0===e?void 0:e.bg,l=null===(r=null===(n=this.props.config.colors)||void 0===n?void 0:n.bell)||void 0===r?void 0:r.fg,p={borderColor:l,backgroundColor:c};return f.h("div",{class:s},f.h("div",{class:"kumulos-bell-inner kumulos-tooltip-parent"},f.h("div",{class:"kumulos-bell",onClick:this.onRequestNativePrompt,style:p},f.h("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},f.h("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z",fill:l}))),f.h(d,{position:a},null!=(u=null===(i=null===(o=this.props.config.labels)||void 0===o?void 0:o.tooltip)||void 0===i?void 0:i.subscribe)?u:"Subscribe for notifications")))},h);function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.onRequestNativePrompt=function(){t.props.onPromptAccepted(t.props.config)},t}var v,m=(v=f.Component,o(_,v),_.prototype.updateBlurState=function(){var t,e="kumulos-overlay-blur";"unsubscribed"!==this.props.subscriptionState&&!document.body.classList.contains(e)||("requesting"===this.props.promptState&&(null===(t=this.props.prompt)||void 0===t?void 0:t.overlay)?document.body.classList.add(e):document.body.classList.remove(e))},_.prototype.componentDidMount=function(){this.updateBlurState()},_.prototype.componentDidUpdate=function(){this.updateBlurState()},_.prototype.componentWillUnmount=function(){document.body.classList.remove("kumulos-overlay-blur")},_.prototype.render=function(){var t,e=this.props,n=e.promptState,r=e.prompt,o=e.subscriptionState;if(!r||"requesting"!==n||!r.overlay||"unsubscribed"!==o)return null;var i=r.overlay,u={background:i.colors.shade,color:i.colors.text};return f.h("div",{class:"kumulos-overlay kumulos-overlay-"+s.getBrowserName(),style:u},f.h("div",{class:"kumulos-overlay-strip",style:{background:i.colors.strip}},f.h("div",{class:"kumulos-overlay-content-container"},f.h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"65",height:"35",viewBox:"0 0 64 33"},f.h("path",{fill:"none",stroke:i.colors.text,"stroke-width":"2.5px","stroke-linecap":"round",d:"M 12.57,11.12\n           C 12.57,11.12 6.84,20.82 4.13,21.01\n             1.42,21.21 20.71,28.67 26.62,28.67M 4.23,21.01\n           C 4.23,21.01 53.96,14.91 60.65,3.47"})),i.iconUrl&&f.h("img",{src:i.iconUrl}),f.h("div",{class:"kumulos-overlay-content"},f.h("h3",null,i.labels.heading),f.h("p",null,i.labels.body),null===(t=i.links)||void 0===t?void 0:t.map(function(t){return f.h("a",{href:t.url,target:"_blank"},t.label)})))))},_);function _(){return null!==v&&v.apply(this,arguments)||this}var b,y=(b=f.Component,o(g,b),g.prototype.render=function(){return f.h("div",{class:"kumulos-toast"},this.props.message)},g);function g(){return null!==b&&b.apply(this,arguments)||this}var k,w=(k=f.Component,o(x,k),x.prototype.showToast=function(t){t&&t.length&&(this.setState({toastQueue:i(this.state.toastQueue,[t])}),setTimeout(this.dequeueToast,3200))},x.prototype.render=function(){return u.createPortal(f.h(f.Fragment,null,this.props.prompts.map(this.renderPrompt,this),!/android|iPhone|iPad|iPod|mobile/i.test(navigator.userAgent)&&f.h(m,{promptState:this.props.promptManagerState,prompt:this.props.currentlyRequestingPrompt,subscriptionState:this.props.subscriptionState}),0<this.state.toastQueue.length&&f.h(y,{message:this.state.toastQueue[0]})),document.body)},x.prototype.renderPrompt=function(t){switch(t.type){case"bell":return f.h(p,{config:t,subscriptionState:this.props.subscriptionState,promptManagerState:this.props.promptManagerState,onPromptAccepted:this.props.onPromptAccepted,onPromptDeclined:this.props.onPromptDeclined});default:return null}},x);function x(t){var e=k.call(this,t)||this;return e.dequeueToast=function(){e.setState({toastQueue:e.state.toastQueue.slice(1)})},e.state={toastQueue:[]},e}e.default=w},function(t,e,n){var r=n(16);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1};n(7)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(6)(!1)).push([t.i,".kumulos-prompt{box-sizing:border-box;z-index:1000}.kumulos-prompt *,.kumulos-prompt *:before,.kumulos-prompt *:after{box-sizing:inherit}.kumulos-bell-container{position:fixed}.kumulos-bell-container-bottom-left{bottom:15px;left:15px}.kumulos-bell-container-bottom-right{bottom:15px;right:15px}.kumulos-bell{transition:transform 0.2s cubic-bezier(0.23, 1, 0.32, 1),box-shadow 0.2s cubic-bezier(0.23, 1, 0.32, 1);will-change:transform, box-shadow, width, height;border-radius:100%;border-color:#fff;background:#4c88e0;box-shadow:1px 2px 2px 0 rgba(0,0,0,0.54);width:60px;height:60px;padding:10px;transform:scale(0.9);cursor:pointer;animation:kumulos-anim-fade-in 0.2s ease-in;backface-visibility:hidden}.kumulos-bell:hover{transform:scale(1);box-shadow:1px 2px 3px 1px rgba(0,0,0,0.54)}.kumulos-bell:active{transform:scale(0.8);box-shadow:1px 2px 2px 0 rgba(0,0,0,0.54)}.kumulos-bell svg{fill:#fff;animation:kumulos-anim-shake 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;animation-delay:0.3s}.kumulos-bell:before{content:'';display:block;width:85%;height:85%;border:solid 1px;border-radius:100%;border-color:inherit;position:absolute;top:0;left:0;margin:7.5% 0 0 7.5%}.kumulos-bell-inner{border-radius:100%}.kumulos-tooltip-parent .kumulos-tooltip{display:none}.kumulos-tooltip-parent:hover .kumulos-tooltip{display:block}.kumulos-tooltip{background:#222;position:absolute;top:50%;padding:8px 12px;font:14px helvetica, sans-serif;color:#eee;border-radius:6px;white-space:nowrap;z-index:1100;pointer-events:none;transform:translateY(-50%);will-change:opacity, transform}.kumulos-tooltip:after{content:\"\";width:0;height:0;position:absolute;top:50%;right:100%;border:solid transparent;border-width:8px;margin-top:-8px}.kumulos-tooltip-right{left:calc(100% + 12px);animation:kumulos-reveal-right 0.2s cubic-bezier(0.23, 1, 0.32, 1)}.kumulos-tooltip-right:after{border-right-color:#222;right:100%}.kumulos-tooltip-left{right:calc(100% + 12px);animation:kumulos-reveal-left 0.2s cubic-bezier(0.23, 1, 0.32, 1)}.kumulos-tooltip-left:after{border-left-color:#222;left:100%}@keyframes kumulos-anim-shake{10%,90%{transform:translate3d(-1px, 0, 0)}20%,80%{transform:translate3d(2px, 0, 0)}30%,50%,70%{transform:translate3d(-2px, 0, 0)}40%,60%{transform:translate3d(2px, 0, 0)}}@keyframes kumulos-anim-fade-in{0%{opacity:0}100%{opacity:1}}@keyframes kumulos-reveal-left{0%{opacity:0;transform:translate(10px, -50%)}100%{opacity:1;transform:translate(0px, -50%)}}@keyframes kumulos-reveal-right{0%{opacity:0;transform:translate(-10px, -50%)}100%{opacity:1;transform:translate(0px, -50%)}}@keyframes kumulos-toast-in-out{0%{opacity:0;transform:translate3d(-50%, 100%, 0)}100%{opacity:1;transform:translateY(-50%, 0, 0)}}.kumulos-toast{display:inline-block;position:fixed;bottom:0;left:50%;transform:translateX(-50%);background:#222;z-index:1100;padding:12px;font:16px helvetica, sans-serif;color:#eee;border-radius:8px 8px 0 0;animation:kumulos-toast-in-out 0.25s cubic-bezier(0.23, 1, 0.32, 1)}\n",""]),t.exports=e},function(t,e,n){var r=n(18);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1};n(7)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(6)(!1)).push([t.i,"body.kumulos-overlay-blur{overflow:hidden}.kumulos-overlay-blur>*:not(.kumulos-overlay){filter:blur(3px)}.kumulos-overlay{box-sizing:border-box;z-index:2000;position:fixed;top:0;left:0;height:100%;width:100%}.kumulos-overlay *,.kumulos-overlay *:before,.kumulos-overlay *:after{box-sizing:inherit}.kumulos-overlay-strip{display:flex;box-shadow:0 0 6px 0 rgba(0,0,0,0.8);min-height:150px}.kumulos-overlay-strip:before{display:block;content:'';width:calc(500px + 12%);max-width:660px}.kumulos-overlay-content-container{display:flex;max-width:38%;padding:1em;font:14px helvetica, sans-serif}.kumulos-overlay-content-container *{margin:0}.kumulos-overlay-content-container svg{margin:55px 1.7em 0 0;stroke:none;fill:rgba(0,0,0,0.8);flex-shrink:0}.kumulos-overlay-content-container img{width:55px;height:55px;flex-shrink:0}.kumulos-overlay-content-container h3,.kumulos-overlay-content-container p,.kumulos-overlay-content-container a{color:inherit}.kumulos-overlay-content-container h3{font-size:1.3em;font-weight:bold}.kumulos-overlay-content-container a{margin-right:0.65em;opacity:0.8;text-decoration:none}.kumulos-overlay .kumulos-overlay-content{margin-left:0.75em}.kumulos-overlay .kumulos-overlay-content p{margin:0.5em 0}.kumulos-overlay-chrome .kumulos-overlay-strip:before{width:440px}.kumulos-overlay-edge .kumulos-overlay-strip:before{display:none}.kumulos-overlay-edge .kumulos-overlay-strip{position:absolute;bottom:0;width:100%;padding-bottom:60px;justify-content:center}.kumulos-overlay-edge .kumulos-overlay-content-container{min-width:675px}.kumulos-overlay-edge .kumulos-overlay-content-container svg{order:1;transform:rotate(-30deg)}.kumulos-overlay-safari .kumulos-overlay-strip:before{width:calc(50% + 212px);max-width:100%}@media (max-width: 900px){body.kumulos-overlay-blur{overflow:auto}.kumulos-overlay-blur>*:not(.kumulos-overlay){filter:none}.kumulos-overlay{display:none}}\n",""]),t.exports=e},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,u,s,a){return new(s=s||Promise)(function(n,e){function r(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((a=a.apply(t,u||[])).next())})},i=this&&this.__generator||function(n,r){var o,i,u,t,s={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(u=2&e[0]?i.return:e[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,e[1])).done)return u;switch(i=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(u=0<(u=s.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){s.label=e[1];break}if(6===e[0]&&s.label<u[1]){s.label=u[1],u=e;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(e);break}u[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};e.__esModule=!0;var u=n(5);e.loadPromptConfigs=function(o){return r(this,void 0,void 0,function(){var e,n,r;return i(this,function(t){switch(t.label){case 0:e={},t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.loadConfig(o)];case 2:return n=t.sent(),e=n.prompts,[3,4];case 3:return r=t.sent(),console.warn(r),[3,4];case 4:return[2,e]}})})}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(1);function f(t,n){return!!Array.isArray(t)&&("string"==typeof n?t.map(function(t){return new RegExp(r.escapeRegExp(t).replace(/\\\*/g,".*"),"g")}).reduce(function(t,e){return t||e.test(String(n))},!1):"number"==typeof n&&-1<t.indexOf(n))}e.triggerMatched=function(t,e){var n,r=t.trigger;if(r.event!==e.type)return!1;if(!(null===(n=r.filters)||void 0===n?void 0:n.length))return!0;if(!e.data)return!1;for(var o=!0,i=0;i<r.filters.length;++i){var u=r.filters[i],s=u[0],a=u[1],c=u[2],l=e.data[s],p=!1;switch(a){case"in":case"IN":p=f(c,l);break;case"=":p=c==l;break;case">":p=c<l;break;case">=":p=c<=l;break;case"<":p=l<c;break;case"<=":p=l<=c;break;default:console.warn("Unknown filter operator: "+a)}o=o&&p}return o}},function(t,e,n){"use strict";n.r(e);var o,i,r,u=n(0),s=[],a=u.options.__r,c=u.options.diffed,l=u.options.__c,p=u.options.unmount;function f(t){u.options.__h&&u.options.__h(i);var e=i.__H||(i.__H={t:[],u:[]});return t>=e.t.length&&e.t.push({}),e.t[t]}function d(t){return h(A,t)}function h(n,t,e){var r=f(o++);return r.__c||(r.__c=i,r.i=[e?e(t):A(void 0,t),function(t){var e=n(r.i[0],t);r.i[0]!==e&&(r.i[0]=e,r.__c.setState({}))}]),r.i}function v(t,e){var n=f(o++);E(n.o,e)&&(n.i=t,n.o=e,i.__H.u.push(n))}function m(t,e){var n=f(o++);E(n.o,e)&&(n.i=t,n.o=e,i.__h.push(n))}function _(t){return y(function(){return{current:t}},[])}function b(t,e,n){m(function(){"function"==typeof t?t(e()):t&&(t.current=e())},null==n?n:n.concat(t))}function y(t,e){var n=f(o++);return E(n.o,e)?(n.o=e,n.v=t,n.i=t()):n.i}function g(t,e){return y(function(){return t},e)}function k(t){var e=i.context[t.__c];if(!e)return t.__;var n=f(o++);return null==n.i&&(n.i=!0,e.sub(i)),e.props.value}function w(t,e){u.options.useDebugValue&&u.options.useDebugValue(e?e(t):t)}function x(t){var e=f(o++),n=d();return e.i=t,i.componentDidCatch||(i.componentDidCatch=function(t){e.i&&e.i(t),n[1](t)}),[n[0],function(){n[1](void 0)}]}function S(){s.some(function(e){if(e.__P)try{e.__H.u.forEach(P),e.__H.u.forEach(C),e.__H.u=[]}catch(t){return u.options.__e(t,e.m),!0}}),s=[]}function P(t){t.p&&t.p()}function C(t){var e=t.i();"function"==typeof e&&(t.p=e)}function E(n,t){return!n||t.some(function(t,e){return t!==n[e]})}function A(t,e){return"function"==typeof e?e(t):e}function R(t,e){for(var n in e)t[n]=e[n];return t}function T(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}u.options.__r=function(t){a&&a(t),o=0,(i=t.__c).__H&&(i.__H.u.forEach(P),i.__H.u.forEach(C),i.__H.u=[])},u.options.diffed=function(t){c&&c(t);var e=t.__c;if(e){var n=e.__H;n&&n.u.length&&(1!==s.push(e)&&r===u.options.requestAnimationFrame||((r=u.options.requestAnimationFrame)||function(t){function e(){clearTimeout(r),cancelAnimationFrame(n),setTimeout(t)}var n,r=setTimeout(e,100);"undefined"!=typeof window&&(n=requestAnimationFrame(e))})(S))}},u.options.__c=function(t,n){n.some(function(e){try{e.__h.forEach(P),e.__h=e.__h.filter(function(t){return!t.i||C(t)})}catch(t){n.some(function(t){t.__h&&(t.__h=[])}),n=[],u.options.__e(t,e.m)}}),l&&l(t,n)},u.options.unmount=function(t){p&&p(t);var e=t.__c;if(e){var n=e.__H;if(n)try{n.t.forEach(function(t){return t.p&&t.p()})}catch(t){u.options.__e(t,e.m)}}},n.d(e,"version",function(){return st}),n.d(e,"Children",function(){return L}),n.d(e,"render",function(){return et}),n.d(e,"hydrate",function(){return nt}),n.d(e,"unmountComponentAtNode",function(){return pt}),n.d(e,"createPortal",function(){return Y}),n.d(e,"createFactory",function(){return at}),n.d(e,"cloneElement",function(){return lt}),n.d(e,"isValidElement",function(){return ct}),n.d(e,"findDOMNode",function(){return ft}),n.d(e,"PureComponent",function(){return U}),n.d(e,"memo",function(){return j}),n.d(e,"forwardRef",function(){return F}),n.d(e,"unstable_batchedUpdates",function(){return dt}),n.d(e,"Suspense",function(){return B}),n.d(e,"SuspenseList",function(){return V}),n.d(e,"lazy",function(){return K}),n.d(e,"useState",function(){return d}),n.d(e,"useReducer",function(){return h}),n.d(e,"useEffect",function(){return v}),n.d(e,"useLayoutEffect",function(){return m}),n.d(e,"useRef",function(){return _}),n.d(e,"useImperativeHandle",function(){return b}),n.d(e,"useMemo",function(){return y}),n.d(e,"useCallback",function(){return g}),n.d(e,"useContext",function(){return k}),n.d(e,"useDebugValue",function(){return w}),n.d(e,"useErrorBoundary",function(){return x}),n.d(e,"createElement",function(){return u.createElement}),n.d(e,"createContext",function(){return u.createContext}),n.d(e,"createRef",function(){return u.createRef}),n.d(e,"Fragment",function(){return u.Fragment}),n.d(e,"Component",function(){return u.Component});var O,M,N,U=(O=u.Component,N=O,(M=I).prototype=Object.create(N.prototype),(M.prototype.constructor=M).__proto__=N,I.prototype.shouldComponentUpdate=function(t,e){return T(this.props,t)||T(this.state,e)},I);function I(t){var e;return(e=O.call(this,t)||this).isPureReactComponent=!0,e}function j(e,r){function n(t){var e=this.props.ref,n=e==t.ref;return!n&&e&&(e.call?e(null):e.current=null),r?!r(this.props,t)||!n:T(this.props,t)}function t(t){return this.shouldComponentUpdate=n,Object(u.createElement)(e,R({},t))}return t.prototype.isReactComponent=!0,t.displayName="Memo("+(e.displayName||e.name)+")",t.t=!0,t}var D=u.options.vnode;function F(n){function t(t){var e=R({},t);return delete e.ref,n(e,t.ref)}return t.prototype.isReactComponent=!0,t.t=!0,t.displayName="ForwardRef("+(n.displayName||n.name)+")",t}u.options.vnode=function(t){t.type&&t.type.t&&t.ref&&(t.props.ref=t.ref,t.ref=null),D&&D(t)};function H(t,n){return t?Object(u.toChildArray)(t).reduce(function(t,e){return t.concat(n(e))},[]):null}var L={map:H,forEach:H,count:function(t){return t?Object(u.toChildArray)(t).length:0},only:function(t){if(1!==(t=Object(u.toChildArray)(t)).length)throw new Error("Children.only() expects only one child.");return t[0]},toArray:u.toChildArray},W=u.options.__e;function q(t){return t&&((t=R({},t)).__c=null,t.__k=t.__k&&t.__k.map(q)),t}function B(t){this.__u=0,this.o=null,this.__b=null}function z(t){var e=t.__.__c;return e&&e.u&&e.u(t)}function K(e){var n,r,o;function t(t){if(n||(n=e()).then(function(t){r=t.default||t},function(t){o=t}),o)throw o;if(!r)throw n;return Object(u.createElement)(r,t)}return t.displayName="Lazy",t.t=!0,t}function V(){this.i=null,this.l=null}u.options.__e=function(t,e,n){if(t.then)for(var r,o=e;o=o.__;)if((r=o.__c)&&r.s)return r.s(t,e.__c);W(t,e,n)},(B.prototype=new u.Component).s=function(t,e){var n=this;null==n.o&&(n.o=[]),n.o.push(e);function r(){i||(i=!0,o?o(u):u())}var o=z(n.__v),i=!1;e.__c=e.componentWillUnmount,e.componentWillUnmount=function(){r(),e.__c&&e.__c()};var u=function(){var t;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});t=n.o.pop();)t.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),t.then(r,r)},B.prototype.render=function(t,e){return this.__b&&(this.__v.__k[0]=q(this.__b),this.__b=null),[Object(u.createElement)(u.Component,null,e.u?null:t.children),e.u&&t.fallback]};function G(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.l.size))for(n=t.i;n;){for(;3<n.length;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}}(V.prototype=new u.Component).u=function(n){var r=this,o=z(r.__v),i=r.l.get(n);return i[0]++,function(t){function e(){r.props.revealOrder?(i.push(t),G(r,n,i)):t()}o?o(e):e()}},V.prototype.render=function(t){this.i=null,this.l=new Map;var e=Object(u.toChildArray)(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},V.prototype.componentDidUpdate=V.prototype.componentDidMount=function(){var n=this;n.l.forEach(function(t,e){G(n,e,t)})};var Q,J=((Q=$.prototype).getChildContext=function(){return this.props.context},Q.render=function(t){return t.children},$);function $(){}function Z(t){var e=this,n=t.container,r=Object(u.createElement)(J,{context:e.context},t.vnode);return e.h&&e.h!==n&&(e.v.parentNode&&e.h.removeChild(e.v),Object(u._unmount)(e.p),e.m=!1),t.vnode?e.m?(n.__k=e.__k,Object(u.render)(r,n),e.__k=n.__k):(e.v=document.createTextNode(""),Object(u.hydrate)("",n),n.appendChild(e.v),e.m=!0,e.h=n,Object(u.render)(r,n,e.v),e.__k=this.v.__k):e.m&&(e.v.parentNode&&e.h.removeChild(e.v),Object(u._unmount)(e.p)),e.p=r,e.componentWillUnmount=function(){e.v.parentNode&&e.h.removeChild(e.v),Object(u._unmount)(e.p)},null}function Y(t,e){return Object(u.createElement)(Z,{vnode:t,container:e})}var X=/^(?:accent|alignment|arabic|baseline|cap|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/;u.Component.prototype.isReactComponent={};var tt="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;function et(t,e,n){if(null==e.__k)for(;e.firstChild;)e.removeChild(e.firstChild);return nt(t,e,n)}function nt(t,e,n){return Object(u.render)(t,e),"function"==typeof n&&n(),t?t.__c:null}var rt=u.options.event;function ot(t,e){t["UNSAFE_"+e]&&!t[e]&&Object.defineProperty(t,e,{configurable:!1,get:function(){return this["UNSAFE_"+e]},set:function(t){this["UNSAFE_"+e]=t}})}u.options.event=function(t){return rt&&(t=rt(t)),t.persist=function(){},t.nativeEvent=t};var it={configurable:!0,get:function(){return this.class}},ut=u.options.vnode;u.options.vnode=function(i){i.$$typeof=tt;var t=i.type,e=i.props;if(e.class!=e.className&&(it.enumerable="className"in e,e.className&&(e.class=e.className),Object.defineProperty(e,"className",it)),"function"!=typeof t){var n,r,o;for(o in e.defaultValue&&(e.value||0===e.value||(e.value=e.defaultValue),delete e.defaultValue),Array.isArray(e.value)&&e.multiple&&"select"===t&&(Object(u.toChildArray)(e.children).forEach(function(t){-1!=e.value.indexOf(t.props.value)&&(t.props.selected=!0)}),delete e.value),e)if(n=X.test(o))break;if(n)for(o in r=i.props={},e)r[X.test(o)?o.replace(/([A-Z0-9])/,"-$1").toLowerCase():o]=e[o]}!function(){var t=i.type,e=i.props;if(e&&"string"==typeof t){var n={};for(var r in e)/^on(Ani|Tra|Tou)/.test(r)&&(e[r.toLowerCase()]=e[r],delete e[r]),n[r.toLowerCase()]=r;if(n.ondoubleclick&&(e.ondblclick=e[n.ondoubleclick],delete e[n.ondoubleclick]),n.onbeforeinput&&(e.onbeforeinput=e[n.onbeforeinput],delete e[n.onbeforeinput]),n.onchange&&("textarea"===t||"input"===t.toLowerCase()&&!/^fil|che|ra/i.test(e.type))){var o=n.oninput||"oninput";e[o]||(e[o]=e[n.onchange],delete e[n.onchange])}}}(),"function"==typeof t&&!t.g&&t.prototype&&(ot(t.prototype,"componentWillMount"),ot(t.prototype,"componentWillReceiveProps"),ot(t.prototype,"componentWillUpdate"),t.g=!0),ut&&ut(i)};var st="16.8.0";function at(t){return u.createElement.bind(null,t)}function ct(t){return!!t&&t.$$typeof===tt}function lt(t){return ct(t)?u.cloneElement.apply(null,arguments):t}function pt(t){return!!t.__k&&(Object(u.render)(null,t),!0)}function ft(t){return t&&(t.base||1===t.nodeType&&t)||null}var dt=function(t,e){return t(e)};e.default={useState:d,useReducer:h,useEffect:v,useLayoutEffect:m,useRef:_,useImperativeHandle:b,useMemo:y,useCallback:g,useContext:k,useDebugValue:w,version:"16.8.0",Children:L,render:et,hydrate:et,unmountComponentAtNode:pt,createPortal:Y,createElement:u.createElement,createContext:u.createContext,createFactory:at,cloneElement:lt,createRef:u.createRef,Fragment:u.Fragment,isValidElement:ct,findDOMNode:ft,Component:u.Component,PureComponent:U,memo:j,forwardRef:F,unstable_batchedUpdates:dt,Suspense:B,SuspenseList:V,lazy:K}}],o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=8);function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var n,r});